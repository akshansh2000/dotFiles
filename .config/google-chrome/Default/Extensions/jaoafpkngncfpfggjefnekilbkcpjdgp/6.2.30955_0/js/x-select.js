const XSelect=class{constructor(a,b,c,d=()=>{}){this.$box=$(a),this.items=b,this.value=c.country,this.storage=c,this.cb=d,this.active_tab="#all",this.initHandlers(),this.initListeners(),this.renderView();let e=$(".geolist_tabs_nav .tabs_link.active").attr("id");e?$("#"+e).click():$("#all").click()}initListeners(){chrome.runtime.onMessage.addListener(a=>{"updateConnectionInfo"===a.action&&(this.storage.currentProxyServer=a.storage.currentProxyServer,this.renderView())})}initHandlers(){$("#locations-list").on("click",".location_item_link",a=>{let b=$(a.target).closest("li").attr("value"),c=this.items.filter(a=>a.region===b);c[0]&&!1===c[0].lock&&(this.value=b,this.renderView(),this.cb(c[0]))}),$(".geo_screen .back_btn").on("click",()=>{$(".main_screen").show(),$(".geo_screen").removeClass("js-opened"),this.renderView()}),$("#search-input").on("keyup",()=>{let a=$("#search-input").val(),b=this.items;if(""!==a&&null!==a){let c=new RegExp(a+".*","i");b=this.items.filter(a=>{let b=a.country_name;return b.match(c)})}this.constructor.renderList(b)}),$("#all").on("click",a=>{let b=this.items.filter(a=>"common"===a.mode);$(a.target).addClass("active"),$("#favorites").removeClass("active"),$("#streaming").removeClass("active"),this.active_tab="#all",this.constructor.renderList(b)}),$("#streaming").on("click",a=>{let b=this.items.filter(a=>"streaming"===a.mode);$(a.target).addClass("active"),$("#all").removeClass("active"),$("#favorites").removeClass("active"),this.active_tab="#streaming",this.constructor.renderList(b)}),$("#favorites").on("click",a=>{let b=this.items.filter(a=>a.favorite);$(a.target).addClass("active"),$("#all").removeClass("active"),$("#streaming").removeClass("active"),this.active_tab="#favorites",this.constructor.renderList(b)}),$(".js-search-close").on("click",()=>{$("#search-input").val(""),$(this.active_tab).click()})}renderView(){let a=this.storage.currentProxyServer;a.country_name?this.$box.find(".geo_chooser").html(`                    <div class="recent-location d-flex flex-column justify-between">                        <a href="#" class="geo_chooser_btn d-i-flex">                            <i class="flag_icon">                                <img src="/img/flags/${a.country_code}.svg" alt="Country flag" width="26">                            </i>                            <div class="connection_info">                                <span class="block_title">recent location</span>                                <p>${a.country_name} [${a.nodes[0].ip}]</p>                            </div>                            <span class="geo_chooser_btn_name"></span>                        </a>                    </div>            `):(a=this.items.find(a=>a.region===this.value),!a&&(a=0<this.items.length?this.items[0]:{value:"error",country_name:"Not detected",ip:"127.0.0.1"}),this.$box.find(".geo_chooser").html(`                    <div class="recent-location d-flex flex-column justify-between">                        <a href="#" class="geo_chooser_btn d-i-flex">                            <i class="flag_icon">                                <img src="/img/flags/${a.region}.svg" alt="Country flag" width="26">                            </i>                            <div class="connection_info">                                <span class="block_title">recent location</span>                                <p>${a.country_name} [${a.ip}]</p>                            </div>                            <span class="geo_chooser_btn_name"></span>                        </a>                    </div>            `))}static renderList(a){$(".geo_screen").find("#locations-list").html(a.map(function(a){let b=a.lock,c=a.original_region?" - "+a.original_region:"";return b?`<li class="location_item d-flex align-center lock-proxy-server-link ${a.favorite}" value="${a.region}">                                    <a class="location_item_link d-flex align-center grow-1" href="#">                                        <i class="location_flag">                                            <img src="/img/flags/${a.value}.svg" alt="Country flag">                                        </i>                                        <span class="location_name">${a.country_name+c}</span>                                        <div class="signal_straight l3">                                            <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 400 400" xml:space="preserve">                                                <rect class="bar_1" y="225"  width="70" height="125"/>                                                <rect class="bar_2" x="100" y="150" width="70" height="200"/>                                                <rect class="bar_3" x="200" y="75" width="70" height="275"/>                                                <rect class="bar_4" x="300" y="0" width="70" height="350"/>                                            </svg>                                        </div>                                    </a>                                    <a href="#">                                        <img src="/img/lock.png" alt="Country flag" class="lock-icon">                                    </a>                                </li>`:`<li class="location_item d-flex align-center ${a.favorite}" value="${a.region}">                                    <a class="location_item_link d-flex align-center grow-1" href="#">                                        <i class="location_flag">                                            <img src="/img/flags/${a.value}.svg" alt="Country flag">                                        </i>                                        <span class="location_name">${a.country_name+c}</span>                                        <div class="signal_straight l3">                                            <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 400 400" xml:space="preserve">                                                <rect class="bar_1" y="225"  width="70" height="125"/>                                                <rect class="bar_2" x="100" y="150" width="70" height="200"/>                                                <rect class="bar_3" x="200" y="75" width="70" height="275"/>                                                <rect class="bar_4" x="300" y="0" width="70" height="350"/>                                            </svg>                                        </div>                                    </a>                                    <a class="add_to_fav_btn" href="#">                                            <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 53.867 53.867" style="enable-background:new 0 0 53.867 53.867;" xml:space="preserve">                                                <polygon style="fill:#dedede;" points="26.934,1.318 35.256,18.182 53.867,20.887 40.4,34.013 43.579,52.549 26.934,43.798                                             10.288,52.549 13.467,34.013 0,20.887 18.611,18.182 " />                                            </svg>                                    </a>                                </li>`}).join(""))}};