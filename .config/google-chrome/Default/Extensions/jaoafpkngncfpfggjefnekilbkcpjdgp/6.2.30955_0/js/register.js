var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-102771997-5"]),_gaq.push(["_trackPageview"]);class Register{constructor(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="https://ssl.google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b),this.handlers()}handlers(){const a=$(document.body);a.on("click","#auth_google",()=>{chrome.runtime.sendMessage({action:"auth:google",register:!0})}),a.on("click","#auth_fb",()=>{chrome.runtime.sendMessage({action:"auth:fb",register:!0})}),a.on("submit","form#signup-submit",a=>{a.preventDefault();let b=$("#email").val(),c=$("#password").val(),d=$("#name").val();chrome.runtime.sendMessage({action:"signup",email:b,password:c,name:d,resource:"page"},a=>{a&&a.success?(_gaq.push(["_trackEvent","register","register_success"]),chrome.runtime.sendMessage({action:"signin",email:b,password:c},a=>{a&&!a.success&&this.constructor.showAlert(a.msg)})):this.constructor.showAlert(a.msg)})}),$(document).ready(function(){$(".language-switcher span").click(function(){$(this).hasClass("en")?chrome.tabs.update({url:chrome.extension.getURL("/pages/en/register.html")}):$(this).hasClass("ru")&&chrome.tabs.update({url:chrome.extension.getURL("/pages/ru/register.html")})})})}static showAlert(a){let b=$("#error");b.html(a),b.show()}}const App=new Register;