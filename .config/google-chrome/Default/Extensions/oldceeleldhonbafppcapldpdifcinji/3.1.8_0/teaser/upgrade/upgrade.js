/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
class UpgradeTeaser{constructor(e,t){this._container=e,this._componentName=t,this._storageController=StorageController.create()}_translate(){translateSection(this._container)}_observe(){}render(){loadStylesheet("/teaser/upgrade/upgrade.css"),loadHTML("/teaser/upgrade/upgrade.html").then(e=>{this._container.innerHTML=e,this._button=this._container.querySelector("#lt-upgrade-teaser-button"),this._element=this._container.querySelector("#upgrade-teaser"),this._translate(),this._observe(),this._storageController.onReady(()=>{this._storageController.startChangelogCoupon();const e=this._storageController.getActiveCoupon();e&&(this._button.classList.add("lt-upgrade-teaser-discount"),this._element.href=this._element.href.replace("addon2","addon2-changelog"),this._renderCoupon(e),window.clearInterval(this._interval),this._interval=window.setInterval(()=>this._renderCoupon(e),1e3))})})}_renderCoupon(e){if(!this._button)return;let t=i18nManager.getMessage("upgradeTeaserDiscount",[e.percent]);t+=` <span class="lt-upgrade-teaser-discount-expires">${i18nManager.getMessage("changelogDiscountExpires")} ${getCountdown(e.expires)}</span>`,this._button.innerHTML=t}}