/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
class TweaksManager{static _isElementCompatibleForGoogleServices(e){return!e.closest("uf-describe-page")&&TweaksManager.DEFAULT_TWEAKS.isElementCompatible(e)}static _splitExcludedPart(e,t,a){const s=[],n=e.substr(t,a);let o=0,r=n.indexOf("\n");for(;-1!==r;)s.push({offset:t+o,length:r-o}),o=r+1,r=n.indexOf("\n",r+1);return s.push({offset:t+o,length:n.length-o}),s}static _getTextSubset(e,t){if(0===t.length)return{text:e,originalText:e,partsMap:[{offset:0,originalOffset:0,length:e.length}]};t.sort((e,t)=>e.offset-t.offset);let a=0;for(;a<t.length-1;){const e=t[a],s=t[a+1];e.offset+e.length>=s.offset?(t[a]={offset:e.offset,length:Math.max(e.offset+e.length,s.offset+s.length)-e.offset},t.splice(a+1,1)):a++}const s=[];0!==t[0].offset&&s.push({offset:0,originalOffset:0,length:t[0].offset});let n=0;for(let e=0;e<t.length-1;e++){const a=t[e],o=t[e+1];s.push({offset:a.offset-n,originalOffset:a.offset+a.length,length:o.offset-(a.offset+a.length)}),n+=a.length}const o=t[t.length-1];o.offset+o.length<e.length&&s.push({offset:o.offset-n,originalOffset:o.offset+o.length,length:e.length-(o.offset+o.length)});let r="";for(const t of s)r+=e.substr(t.originalOffset,t.length);return{text:r,originalText:e,partsMap:s}}static _getEmail(e){const t=TweaksManager.EMAIL_REGEXP.exec(e);return t?t[0].replace(TweaksManager.EMAIL_DOMAIN_REGEXP,"@replaced.domain").trim():""}static _getFullName(e){return e.replace(TweaksManager.EMAIL_REGEXP,"").replace(TweaksManager.ADDRESS_SPECIAL_CHARS_REGEXP,"").trim()}static getDefaultTweaks(){return this.DEFAULT_TWEAKS}static getTweaks(e){function t(e,t,a=!1){Array.isArray(t)||(t=[t]);for(const s of t)if("string"==typeof s){if(e===s||a&&e.startsWith(s))return!0}else if(s.test(e))return!0;return!1}const a=getDomain(e,"");if(!a)return TweaksManager.DEFAULT_TWEAKS;const s=getSubdomains(a),n=TweaksManager.SITE_TWEAKS.find(a=>"hostname"in a.match?s.some(e=>t(e,a.match.hostname)):"url"in a.match?t(e,a.match.url):void 0);return Object.assign({},TweaksManager.DEFAULT_TWEAKS,n)}}TweaksManager.NON_COMPATIBLE_TAGS=["TR","TH","TD","THEAD","TBODY","TFOOT","CAPTION"],TweaksManager.SIGNATURE_ACTIVE_ATTRIBUTE="data-lt-sig-active",TweaksManager.SIGNATURE_ATTRIBUTE="data-lt-sig",TweaksManager.TEXT_IGNORING_RULES=new Map([["QUOTED_LINE",{pattern:/^[ \t]*>.*?(\n|$)/gm}],["HTML_CODE_BLOCK",{pattern:/\s?<code\b[^>]*>[^]*?<\/code>/gi}],["HTML_OPENING_TAG",{pattern:/<[a-z1-6]+\b[^>\n]*>/gi}],["HTML_CLOSING_TAG",{pattern:/<\/[a-z1-6]+>/gi}],["MARKDOWN_BOLD_1",{pattern:/(^|\s)(_|~~)?(\*\*)([^\s\*](?:.*?\S)?)(\*\*)(\2)([\s.!?,:;]|$)/g,ignoredParts:[!1,!1,!0,!1,!0,!1,!1]}],["MARKDOWN_BOLD_2",{pattern:/(^|\s)(\*|~~)?(__)([^\s_](?:.*?\S)?)(__)(\2)([\s.!?,:;]|$)/g,ignoredParts:[!1,!1,!0,!1,!0,!1,!1]}],["MARKDOWN_ITALIC_1",{pattern:/(^|\s)(__|~~)?(\*)([^\s\*](?:.*?\S)?)(\*)(\2)([\s.!?,:;]|$)/g,ignoredParts:[!1,!1,!0,!1,!0,!1,!1]}],["MARKDOWN_ITALIC_2",{pattern:/(^|\s)(\*\*|~~)?(_)([^\s_](?:.*?\S)?)(_)(\2)([\s.!?,:;]|$)/g,ignoredParts:[!1,!1,!0,!1,!0,!1,!1]}],["MARKDOWN_BOLD_AND_ITALIC_1",{pattern:/(^|\s)(\*\*\*)([^\s\*](?:.*?\S)?)(\*\*\*)([\s.!?,:;]|$)/g,ignoredParts:[!1,!0,!1,!0,!1]}],["MARKDOWN_BOLD_AND_ITALIC_2",{pattern:/(^|\s)(___)([^\s_](?:.*?\S)?)(___)([\s.!?,:;]|$)/g,ignoredParts:[!1,!0,!1,!0,!1]}],["MARKDOWN_STRIKETHROUGH",{pattern:/(^|\s)(\*|\*\*|_|__)?(~~)([^\s~](?:.*?\S)?)(~~)(\2)([\s.!?,:;]|$)/g,ignoredParts:[!1,!1,!0,!1,!0,!1,!1]}],["MARKDOWN_CODE_BLOCK",{pattern:/(^|[^`])(```?)(?!`)([^]*?[^`])(\2)(?=[^`]|$)/gm,ignoredParts:[/^\s$/,!0,!0,!0]}],["MARKDOWN_IMAGE_WITHOUT_TITLE",{pattern:/(!\[(?:(?:Uploading\s)?(?:Screen\sShot\s|Bildschirmfoto\s)?)?)([^\[\]]+)(\]\(\s*[^()"'\s]*\s*\))/g,ignoredParts:[!0,!1,!0]}],["MARKDOWN_IMAGE_WITH_TITLE",{pattern:/(!\[)([^\[\]]+)(\]\(\s*[^()"'\s]+)(\s+)(["'])([^]*?)(\5\s*\))/g,ignoredParts:[!0,!1,!0,!1,!0,!1,!0]}],["MARKDOWN_LINK_WITHOUT_TITLE",{pattern:/(\[)([^\[\]]+)(\]\(\s*[^()"'\s]+\s*\))/g,ignoredParts:[!0,!1,!0]}],["MARKDOWN_LINK_WITH_TITLE",{pattern:/(\[)([^\[\]]+)(\]\(\s*[^()"'\s]+)(\s+)(["'])([^]*?)(\5\s*\))/g,ignoredParts:[!0,!1,!0,!1,!0,!1,!0]}],["BBCODE_CODE_BLOCK",{pattern:/\s?\[code\][^]*?\[\/code\]/gi}],["BBCODE_OPENING_TAG",{pattern:/\[(img|url|email|post|quote|list|youtube|vimeo|googlemaps|googlewidget|code|modalurl|topic|highlight|left|center|right|font|size|color|s|u|i|b|style|table|tr|td)\b[^\]\n]*\]/gi}],["BBCODE_CLOSING_TAG",{pattern:/\[\/(img|url|email|post|quote|list|youtube|vimeo|googlemaps|googlewidget|code|modalurl|topic|highlight|left|center|right|font|size|color|s|u|i|b|style|table|tr|td)\]/gi}],["WORDPRESS_TAG",{pattern:/\[[a-z0-9_\-]+\s[a-z0-9_\-]+=.+?\]/gi}],["JIRA_CODE_BLOCK",{pattern:/\s?{code(:[a-z0-9#]+)?}[^]*?{code}/gi}],["JIRA_OPENING_OR_CLOSING_TAG",{pattern:/{(color|code|noformat|quote)(:[a-z0-9#]+)?}/gi}],["TEXTILE_STRIKETHROUGH",{pattern:/(\s|^)(~)([^\s~](?:.*?\S)?)(~)([\s.!?,:;]|$)/g,ignoredParts:[!1,!0,!1,!0,!1]}],["TEXTILE_BLOCK_TAG",{pattern:/^(h[1-6]|bq|bc|p|pre|###|notextile)\./gim}],["WIKITEXT_LINK_WITHOUT_TITLE",{pattern:/(\[\[)([a-z:][^|\]\n]*)(\]\])/gi,ignoredParts:[!0,!1,!0]}],["WIKITEXT_LINK_WITH_TITLE",{pattern:/(\[\[[a-z:][^|\]\n]*\|)([^\]\n]+)(]])/gi,ignoredParts:[!0,!1,!0]}],["EMOTICONS_LTR",{pattern:/(^|\s+)([:;|=][-~^]?[()\[\]\\/|@$*#&XxDOoPp])(\s+(?=[,.!?)]|$)|(?=[\s,.!?)]|$))/gm}],["EMOTICONS_LTR_2",{pattern:/(^|\s+)([8B%][-~^][D()\[\]])(\s+(?=[,.!?)]|$)|(?=[\s,.!?)]|$))/gm}],["EMOTICONS_LTR_3",{pattern:/(^|\s+)([:;%|=][-~^]?3)(\s+(?=[,.!?)]|$)|(?=[\s,.!?)]|$))/gm}],["EMOTICONS_RTL",{pattern:/(^|\s+)([()[\]\\/|@$*#&XxDOo][-~^]?[:;%|=])(\s+(?=[,.!?)]|$)|(?=[\s,.!?)]|$))/gm}],["XD_SMILE",{pattern:/(^|\s+)([xX]D)(\s+(?=[,.!?)]|$)|(?=[\s,.!?)]|$))/gm}],["HEART_SMILE",{pattern:/(^|\s+)(<[\\/]?3)(\s+(?=[,.!?)]|$)|(?=[\s,.!?)]|$))/gm}],["EMOJI",{pattern:/(^|\s+)(\:\w+\:)(\s+(?=[,.!?)]|$)|(?=[\s,.!?)]|$))/gm}],["JIRA_SMILEYS",{pattern:/(^|\s+)\(([-+!?ynxi]|(\*[rgby]?)|on|off|flag|flagoff)\)(\s+(?=[,.!?)]|$)|(?=[\s,.!?)]|$))/gm}]]),TweaksManager.EMAIL_REGEXP=/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/gi,TweaksManager.EMAIL_DOMAIN_REGEXP=/@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/i,TweaksManager.ADDRESS_SPECIAL_CHARS_REGEXP=/["'`<>]/g,TweaksManager.DEFAULT_TWEAKS={init(){document.documentElement.setAttribute("data-lt-installed","true")},supported:()=>!0,beta:()=>!1,getEditorGroupId(e){try{return new URL(e).pathname}catch(e){return"unknown"}},storeTemporaryIgnoredItems:()=>!1,unsupportedMessage:()=>"",onElement(e){},isElementCompatible(e){if(TweaksManager.NON_COMPATIBLE_TAGS.includes(e.tagName))return!1;if(!((isFormElement(e)||isCEElement(e))&&!e.readOnly))return!1;if("true"===e.getAttribute("data-lt-active"))return!0;if("false"===e.getAttribute("data-lt-active"))return!1;if(isTextInput(e))return!1;if(e.classList.contains("cke_editable"))return!0;if(e.classList.contains("ve-ce-documentNode"))return!0;if(e.classList.contains("fr-element")&&!e.classList.contains("wsc-instance"))return!0;if(e.parentElement&&e.parentElement.classList.contains("wp-block-code"))return!1;const t=e.ownerDocument;if(t.head&&isTinyMCE(e)){const a=t.createElement("script"),s="_isTinymceSpellcheckerActivated";return a.innerText=`\n                    try {\n                        if (window.parent.tinymce.get(document.body.dataset.id).plugins.tinymcespellchecker) {\n                            document.body.dataset.${s} = true;\n                        }\n                    } catch(e) {}\n                `,t.head.appendChild(a),a.remove(),!Boolean(e.dataset[s])}return!!(window.innerHeight>=20&&window.innerWidth>=100)&&"false"!==e.getAttribute("spellcheck")},initElement:e=>({destroy(){}}),getSelectedText:()=>getSelectedText(),getSelection(){const e=window.getSelection();return e?{startNode:e.anchorNode,startOffset:e.anchorOffset,endNode:e.focusNode,endOffset:e.focusOffset,isCollapsed:e.isCollapsed}:null},getClickEvent:()=>"click",getParsingDetector(e){const t=document.body&&document.body.dataset&&document.body.dataset.id&&document.body.dataset.id.includes("ZmHtmlEditor");let a=location.href.includes("/owa/")||!!document.querySelector(".owa-font-compose");try{a=a||window.parent.location.href.includes("/owa/")||!!window.parent.document.querySelector(".owa-font-compose")}catch(e){}let s=!1;try{s=!!window.parent.document.title.match(/roundcube/i)||!!window.parent.location.href.match(/_action=compose/i)}catch(e){}const n=isProseMirror(e),o=isTinyMCE(e),r=isQuillEditor(e);return{isIgnored(e){const t=e.tagName.toUpperCase();return!!CEElementInspector.SKIPPING_TAGS.includes(t)||("SUP"===t&&e.textContent?CEElementInspector.SUP_REGEXP.test(e.textContent.trim()):"false"===e.getAttribute("contenteditable")||"false"===e.getAttribute("spellcheck")?(!n||!e.hasAttribute("data-mention-id")&&!e.hasAttribute("usertype"))&&(!o||!e.classList.contains("user-hover")):!(!r||!e.classList.contains("ql-code-block")))},isSignature:e=>t?!!(e.dataset&&e.dataset.marker&&e.dataset.marker.includes("_SIG_")):a?"signature"===e.id.toLowerCase():!!s&&"_rc_sig"===e.id,isQuote:e=>t?!!(e.dataset&&e.dataset.marker&&e.dataset.marker.includes("_QUOTED_")):!!a&&("divRplyFwdMsg"===e.id||!!e.previousElementSibling&&"divRplyFwdMsg"===e.previousElementSibling.id),isBlock:(e,t)=>CEElementInspector.DISPLAY_BLOCK_VALUES.includes(t.display||""),replaceText:(e,t,a)=>(e=removeZWC(e),e=normalizeWhitespaces(e))}},getValuableText(e,t){const a=[];for(const[e,s]of TweaksManager.TEXT_IGNORING_RULES){const e=matchAll(t,s.pattern);for(const n of e){let e=n.index;if(void 0===s.ignoredParts){const s=n[0].length;a.push(...TweaksManager._splitExcludedPart(t,e,s))}else for(let o=0;o<s.ignoredParts.length;o++){if(void 0===n[o+1])continue;const r=n[o+1].length,i=s.ignoredParts[o];("boolean"==typeof i?i:i.test(n[o+1]))&&a.push(...TweaksManager._splitExcludedPart(t,e,r)),e+=r}}}return TweaksManager._getTextSubset(t,a)},filterErrors:(e,t)=>t,getRecipientInfo(e){try{const t="BODY"===e.tagName&&"tinymce"===e.id,a="TEXTAREA"===e.tagName&&"composebody"===e.id;if(t||a){const e=window.parent.document.getElementById("_from"),t=window.parent.document.getElementById("compose-subject"),a=window.parent.document.getElementById("_to");if(e&&t&&a){const e=TweaksManager._getEmail(a.value),t=TweaksManager._getFullName(a.value);return Promise.resolve({address:e,fullName:t})}}}catch(e){}return Promise.resolve({address:"",fullName:""})},getHighlighterAppearance:e=>({getZIndex(e,t){let a=t.getStyle(e,"z-index");return(a=parseInt(a)||0)>0||t.isStackingContext(e)?a+1:"auto"}}),getToolbarAppearance(e){const t=[Dialog.CONTAINER_ELEMENT_NAME,ErrorCard.CONTAINER_ELEMENT_NAME].join(", "),a="chat-input-control"===e.id&&e.classList.contains("window__chatInputControl"),s=isGutenberg(e);return{isVisible(e,t,n=32){if(a)return!1;let o=!0;if(o=isTextArea(e)||isTextInput(e)?!e.value.trim():!e.textContent.trim(),s&&o)return!1;const r=t.getPaddingBox(e);return!(o&&r.height<n)&&(r.width>=160&&r.height>=18)},getPosition(e,a,s,n,o,r=18){const i=e.ownerDocument.documentElement,l=e.ownerDocument.body;if(e===l){return{fixed:!0,left:(n?6:i.clientWidth-o.width-6)+"px"}}const g=i.clientHeight,c=getVisibleTopAndBottom(e,s,g,t),m=c.bottom-c.top;if(m<r)return null;let u=s.getPaddingBox(e);if("IFRAME"===e.tagName){let t=null;try{t=e.contentWindow.document.documentElement}catch(e){}if(!t)return null;n=s.isRTL(t.ownerDocument.body),u.width=t.clientWidth,u.height=t.clientHeight,u.right=u.left+u.width,u.bottom=u.top+u.height}const d=s.getScaleXFactor(a),p=s.getScaleYFactor(a),T=s.getZoom(a),f=d*T,E=p*T;let h=(u.top+c.bottom)/E-6-o.height,A=n?u.left/f+6:u.right/f-6-o.width;if(m<=40){h=(u.top+c.bottom-m/2)/E-o.height/2}const b=u.height>=250,_=(i.scrollTop||l.scrollTop)+g;if(b&&u.top+c.bottom>=_&&u.top+o.height+12<_)return{fixed:!0,left:Math.round(A)+"px"};if(h>_)return null;const x=_-o.height-8;return h=Math.min(h,x),{fixed:!1,left:Math.round(A)+"px",top:Math.round(h)+"px"}},getZIndex:(e,t,a)=>a.getZIndex(e,t),getClassName:()=>null,hasTurnOff:()=>!1,getTurnOffMessage:()=>""}},applyFix(e){const{offset:t,replacementText:a,editor:s}=e;return s.inputAreaWrapper.replaceText(t.start,t.length,a)},isClickIgnored:e=>!e.isTrusted,destroy(){document.documentElement&&document.documentElement.removeAttribute("data-lt-installed")},onElementDestroy(e,t){onElementDisabled(e,t),onElementRemoved(e,t)}},TweaksManager.SITE_TWEAKS=[{match:{hostname:["1und1.de","gmx.net","gmx.com","web.de"]},getParsingDetector(e){const t=TweaksManager.DEFAULT_TWEAKS.getParsingDetector(e);return{isIgnored:e=>t.isIgnored(e),isSignature:e=>"string"==typeof e.className&&e.className.includes("signature"),isQuote:e=>"quote"===e.getAttribute("name"),isBlock:(e,a)=>t.isBlock(e,a),replaceText:(e,a,s)=>t.replaceText(e,a,s)}},getRecipientInfo(e){try{const e=document.querySelector(".objectivation-address[title]")||window.parent.document.querySelector(".objectivation_name[title]");if(e){const t=(e.getAttribute("title")||"").replace(/"/g,""),a=TweaksManager._getEmail(t),s=TweaksManager._getFullName(t);return Promise.resolve({address:a,fullName:s})}}catch(e){}return Promise.resolve({address:"",fullName:""})}},{match:{hostname:"mail.aol.com"},isElementCompatible:e=>e.classList.contains("contentEditDiv")&&"true"===e.getAttribute("contenteditable")||TweaksManager.DEFAULT_TWEAKS.isElementCompatible(e),getParsingDetector(e){const t=TweaksManager.DEFAULT_TWEAKS.getParsingDetector(e);return{isIgnored:e=>t.isIgnored(e),isSignature:e=>"clear:both"===e.getAttribute("style"),isQuote:e=>Boolean("DIV"===e.tagName&&e.previousElementSibling&&"BR"===e.previousElementSibling.tagName&&e.textContent&&e.textContent.startsWith("-----")),isBlock:(e,a)=>t.isBlock(e,a),replaceText:(e,a,s)=>t.replaceText(e,a,s)}}},{match:{hostname:"atlassian.net"},getEditorGroupId(e){const t=e.match(/\/pages.*?\/(\d{3,})($|\/|\?|#)/);return t?t[1]:TweaksManager.DEFAULT_TWEAKS.getEditorGroupId(e)},storeTemporaryIgnoredItems:()=>!0,isElementCompatible:e=>!(!e.isContentEditable||!e.className.includes("ProseMirror"))||TweaksManager.DEFAULT_TWEAKS.isElementCompatible(e),getHighlighterAppearance(e){const t=location.href.match(/\/(wiki|projects|issues)\//),a=TweaksManager.DEFAULT_TWEAKS.getHighlighterAppearance(e);return{getZIndex(e,s){const n=a.getZIndex(e,s);return t&&e.classList.contains("ProseMirror")?"auto"===n?1:n+1:n}}},getToolbarAppearance(e){const t=TweaksManager.DEFAULT_TWEAKS.getToolbarAppearance(e);return{isVisible:(e,a)=>e.className.includes("ProseMirror")||t.isVisible(e,a),getPosition:(e,a,s,n,o)=>t.getPosition(e,a,s,n,o),getZIndex:(e,a,s)=>t.getZIndex(e,a,s),getClassName:e=>t.getClassName(e),hasTurnOff:()=>!1,getTurnOffMessage:e=>t.getTurnOffMessage(e)}}},{match:{url:/\/jira\/|jira\./i},getHighlighterAppearance(e){const t=TweaksManager.DEFAULT_TWEAKS.getHighlighterAppearance(e);return{getZIndex:(e,a)=>e.classList.contains("richeditor-cover")?"auto":t.getZIndex(e,a)}}},{match:{url:/backoffice.*?\.check24\.de|mietwagen.*?\.check24\.de/},getParsingDetector(e){const t=/^\s*(dem erhalt von e-mails hinsichtlich|sie haben noch fragen|war diese e-mail hilfreich)/i,a=TweaksManager.DEFAULT_TWEAKS.getParsingDetector(e);return{isIgnored:e=>a.isIgnored(e),isSignature:e=>"TABLE"===e.tagName&&!!t.test(e.textContent),isQuote:e=>!1,isBlock:(e,t)=>a.isBlock(e,t),replaceText:(e,t,s)=>a.replaceText(e,t,s)}}},{match:{hostname:"basecamp.com"},getToolbarAppearance(e){const t=document.querySelector(".chat__tools"),a=t?t.offsetWidth:0,s=TweaksManager.DEFAULT_TWEAKS.getToolbarAppearance(e);return{isVisible:(e,t)=>s.isVisible(e,t),getPosition(e,t,n,o,r){const i=s.getPosition(e,t,n,!1,r);return i&&i.top&&i.left&&Object.assign(i,{left:parseInt(i.left)-a-8+"px",top:parseInt(i.top)-6+"px"}),i},getZIndex:(e,t,a)=>s.getZIndex(e,t,a),getClassName:e=>s.getClassName(e),hasTurnOff:()=>!1,getTurnOffMessage:e=>s.getTurnOffMessage(e)}}},{match:{hostname:"canva.com"},isElementCompatible(e){const t=/rotate\([1-9\-]/;let a=e.closest("[style*=rotate]");for(;a&&a!==e.ownerDocument.body;){if(a.style.transform&&a.style.transform.match(t))return!1;a=a.parentElement&&a.parentElement.closest("[style*=rotate]")}return TweaksManager.DEFAULT_TWEAKS.isElementCompatible(e)}},{match:{hostname:"clickfunnels.com"},supported:()=>!1,unsupportedMessage:()=>i18nManager.getMessage("siteCannotBeSupported")},{match:{hostname:["onlinebanking.deutschebank.be","mabanque.bnpparibas"]},isElementCompatible:e=>!1},{match:{hostname:"deepl.com"},isElementCompatible:e=>!e.className.includes("target_textarea")&&TweaksManager.DEFAULT_TWEAKS.isElementCompatible(e),applyFix(e){const t=TweaksManager.DEFAULT_TWEAKS.applyFix(e);return e.editor.inputAreaWrapper.simulateInput(e.replacementText),t}},{match:{hostname:"paper.dropbox.com"},getEditorGroupId(e){const t=e.match(/\/doc\/(.+?)($|\/|\?|#)/i);return t?t[1]:TweaksManager.DEFAULT_TWEAKS.getEditorGroupId(e)},storeTemporaryIgnoredItems:()=>!0,getHighlighterAppearance(e){const t=TweaksManager.DEFAULT_TWEAKS.getHighlighterAppearance(e);return{getZIndex(e,a){const s=t.getZIndex(e,a);return e.classList.contains("ace-editor")?"auto"===s?1:s+1:s}}},getToolbarAppearance(e){const t=TweaksManager.DEFAULT_TWEAKS.getToolbarAppearance(e);return{isVisible:(e,a)=>!(e.offsetHeight<30&&e.classList.contains("editor-blank"))&&t.isVisible(e,a),getPosition:(e,a,s,n,o)=>t.getPosition(e,a,s,n,o),getZIndex:(e,a,s)=>t.getZIndex(e,a,s),getClassName:e=>t.getClassName(e),hasTurnOff:()=>!1,getTurnOffMessage:e=>t.getTurnOffMessage(e)}}},{match:{hostname:"dropbox.com"},isElementCompatible:e=>Boolean("true"===e.getAttribute("contenteditable")&&e.closest(".sc-comment-editor-draft"))||TweaksManager.DEFAULT_TWEAKS.isElementCompatible(e),getToolbarAppearance(e){const t=TweaksManager.DEFAULT_TWEAKS.getToolbarAppearance(e);return{isVisible:(e,a)=>t.isVisible(e,a,60),getPosition:(e,a,s,n,o)=>t.getPosition(e,a,s,n,o),getZIndex:(e,a,s)=>t.getZIndex(e,a,s),getClassName:e=>t.getClassName(e),hasTurnOff:()=>!1,getTurnOffMessage:e=>t.getTurnOffMessage(e)}}},{match:{hostname:"editor.reedsy.com"},getToolbarAppearance(e){const t=!!e.closest("#redit-text-editor"),a=TweaksManager.DEFAULT_TWEAKS.getToolbarAppearance(e);return{isVisible:(e,t)=>a.isVisible(e,t),getPosition(e,s,n,o,r){if(t){const t=n.getBorderBox(e,!1),a=e.ownerDocument.documentElement.clientHeight;if(t.bottom>=a)return{left:t.right-r.width-6+"px",fixed:!0}}return a.getPosition(e,s,n,o,r)},getZIndex:(e,t,s)=>a.getZIndex(e,t,s),getClassName:e=>a.getClassName(e),hasTurnOff:()=>!1,getTurnOffMessage:e=>a.getTurnOffMessage(e)}}},{match:{url:/www\.facebook\.com\/plugins\/feedback/},isElementCompatible:e=>"false"===e.getAttribute("spellcheck")&&"true"===e.getAttribute("contenteditable")||TweaksManager.DEFAULT_TWEAKS.isElementCompatible(e)},{match:{hostname:["facebook.com","messenger.com"]},getToolbarAppearance(e){const t=!!e.closest(".fbDockWrapper, [data-pagelet=ChatTab]"),a=TweaksManager.DEFAULT_TWEAKS.getToolbarAppearance(e);return{isVisible:(e,a)=>!(t&&!e.textContent.trim())&&a.getPaddingBox(e).width>=120,getPosition(e,s,n,o,r){const i=a.getPosition(e,s,n,!1,r,15);return i&&i.top&&t?Object.assign(i,{top:parseInt(i.top)-n.getDocumentScroll().top+"px",fixed:!0}):i},getZIndex:(e,t,s)=>a.getZIndex(e,t,s),getClassName:e=>a.getClassName(e),hasTurnOff:()=>!1,getTurnOffMessage:e=>a.getTurnOffMessage(e)}}},{match:{hostname:"addons.mozilla.org"},supported:()=>!1,unsupportedMessage:()=>i18nManager.getMessage("addonsSiteNotSupported")},{match:{hostname:/ads\.google\.com/},isElementCompatible:e=>!(!isTextInput(e)||!e.closest("[eta-headline], .headline-field-group, .long-headline-field, .description-field-group"))||TweaksManager._isElementCompatibleForGoogleServices(e),getToolbarAppearance(e){const t=!!e.closest("[eta-headline], .headline-field-group, .long-headline-field, .description-field-group")&&isTextInput(e),a=TweaksManager.DEFAULT_TWEAKS.getToolbarAppearance(e);return{isVisible:(e,s)=>!!t||a.isVisible(e,s),getPosition:(e,t,s,n,o)=>a.getPosition(e,t,s,n,o,15),getZIndex:(e,t,s)=>a.getZIndex(e,t,s),getClassName:e=>a.getClassName(e),hasTurnOff:()=>!1,getTurnOffMessage:e=>a.getTurnOffMessage(e)}}},{match:{hostname:"chrome.google.com"},supported:()=>!1,unsupportedMessage:()=>i18nManager.getMessage("webstoreSiteNotSupported")},{match:{hostname:"microsoftedge.microsoft.com"},supported:()=>!1,unsupportedMessage:()=>i18nManager.getMessage("edgeWebstoreSiteNotSupported")},{match:{hostname:"crowdsource.google.com"},isElementCompatible:e=>!(!isTextInput(e)||!e.closest("#question"))||TweaksManager._isElementCompatibleForGoogleServices(e),getToolbarAppearance(e){const t=isTextInput(e)&&!!e.closest("#question"),a=TweaksManager.DEFAULT_TWEAKS.getToolbarAppearance(e);return{isVisible:(e,s)=>t||a.isVisible(e,s),getPosition:(e,t,s,n,o)=>a.getPosition(e,t,s,n,o),getZIndex:(e,t,s)=>a.getZIndex(e,t,s),getClassName:e=>a.getClassName(e),hasTurnOff:()=>!1,getTurnOffMessage:e=>a.getTurnOffMessage(e)}}},{match:{url:/docs\.google\.com\/(spreadsheets|presentation)/},supported:()=>!1,unsupportedMessage:()=>browser.i18n.getMessage("siteCannotBeSupported")},{match:{url:/docs\.google\.com\/sharing/},isElementCompatible:e=>!e.classList.contains("apps-share-chips-input")&&TweaksManager._isElementCompatibleForGoogleServices(e)},{match:{url:GoogleDocs.DOCS_URL_REGEXP},init:()=>(GoogleDocs.init(),TweaksManager.DEFAULT_TWEAKS.init()),beta:()=>!0,getEditorGroupId:e=>GoogleDocs.getDocId(e)||TweaksManager.DEFAULT_TWEAKS.getEditorGroupId(e),storeTemporaryIgnoredItems:()=>!0,onElement:e=>GoogleDocs.onPage(e),isElementCompatible:e=>GoogleDocs.isPage(e)?GoogleDocs.isElementCompatible(e):TweaksManager._isElementCompatibleForGoogleServices(e),initElement:e=>GoogleDocs.isPage(e)?GoogleDocs.initPage(e):TweaksManager.DEFAULT_TWEAKS.initElement(e),getSelectedText:()=>GoogleDocs.getSelectedText()||TweaksManager.DEFAULT_TWEAKS.getSelectedText(),getSelection:()=>GoogleDocs.getSelection()||TweaksManager.DEFAULT_TWEAKS.getSelection(),getClickEvent:()=>"mouseup",filterErrors:(e,t)=>GoogleDocs.isPage(e.inputArea)?GoogleDocs.filterErrors(e.inputArea,t):t,getHighlighterAppearance(e){const t=GoogleDocs.isPage(e),a=TweaksManager.DEFAULT_TWEAKS.getHighlighterAppearance(e);return{getZIndex:(e,s)=>t?GoogleDocs.getHighlighterZIndex(e):a.getZIndex(e,s)}},getToolbarAppearance:e=>GoogleDocs.isPage(e)?{isVisible:(e,t)=>!0,getPosition:(e,t,a)=>GoogleDocs.getToolbarPosition(e,a),getZIndex:(e,t,a)=>GoogleDocs.getToolbarZIndex(e),getClassName:()=>GoogleDocs.TOOLBAR_CLASS_NAME,hasTurnOff:()=>!0,getTurnOffMessage:()=>i18nManager.getMessage("googleDocsDisableButton")}:TweaksManager.DEFAULT_TWEAKS.getToolbarAppearance(e),getParsingDetector:e=>({isIgnored:e=>GoogleDocs.isIgnoredElement(e),isSignature:e=>!1,isQuote:e=>!1,isBlock:(e,t)=>GoogleDocs.isBlockElement(e,t),replaceText:(e,t,a)=>GoogleDocs.replaceText(e,t,a)}),applyFix:e=>GoogleDocs.isPage(e.editor.inputArea)?GoogleDocs.applyFix(e):TweaksManager.DEFAULT_TWEAKS.applyFix(e),onElementDestroy:(e,t)=>GoogleDocs.isPage(e)?GoogleDocs.onPageDestroy(e,t):TweaksManager.DEFAULT_TWEAKS.onElementDestroy(e,t),destroy:()=>(GoogleDocs.destroy(),TweaksManager.DEFAULT_TWEAKS.destroy())},{match:{hostname:"keep.google.com"},getToolbarAppearance(e){const t=TweaksManager.DEFAULT_TWEAKS.getToolbarAppearance(e);return{isVisible:(e,a)=>t.isVisible(e,a),getPosition(e,a,s,n,o){const r=t.getPosition(e,a,s,!1,o);return"list item"===e.getAttribute("aria-label")&&r&&r.left&&(r.left=parseInt(r.left)-30+"px"),r},getZIndex:(e,a,s)=>t.getZIndex(e,a,s),getClassName:e=>t.getClassName(e),hasTurnOff:()=>!1,getTurnOffMessage:e=>t.getTurnOffMessage(e)}},isElementCompatible:e=>TweaksManager._isElementCompatibleForGoogleServices(e)},{match:{hostname:"mail.google.com"},isElementCompatible:e=>e.matches(".editable[contenteditable=true]")||TweaksManager._isElementCompatibleForGoogleServices(e),initElement(e){const t=e=>{e.target instanceof Element&&e.target.closest("[aria-invalid=grammar], [aria-invalid=spelling]")&&e.stopImmediatePropagation()},a=()=>{const e=document.querySelectorAll("[data-overlay-action=spellreplace]");e&&Array.from(e).forEach(e=>{const t=e.closest(".pl");t&&t.remove()})};e.addEventListener("keyup",a),e.addEventListener("click",t,!0),e.addEventListener("contextmenu",t,!0);const s=(Number(document.documentElement.getAttribute("data-lt-gmail-tweaks"))||0)+1;return document.documentElement.setAttribute("data-lt-gmail-tweaks",String(s)),{destroy(){const s=(Number(document.documentElement.getAttribute("data-lt-gmail-tweaks"))||0)-1;s<=0?document.documentElement.removeAttribute("data-lt-gmail-tweaks"):document.documentElement.setAttribute("data-lt-gmail-tweaks",String(s)),e.removeEventListener("keyup",a),e.removeEventListener("click",t,!0),e.removeEventListener("contextmenu",t,!0)}}},getParsingDetector(e){const t=TweaksManager.DEFAULT_TWEAKS.getParsingDetector(e);return{isIgnored:e=>t.isIgnored(e),isSignature:t=>"string"==typeof t.className&&(t.className.includes("gmail_signature")||"gmail_signature"===t.getAttribute("data-smartmail")||(t.getAttribute("style")||"").includes("color:WISESTAMP_SIG"))&&e.firstElementChild!==t,isQuote(t){const a=t.className;if("string"!=typeof a)return!1;if(a.includes("gmail_attr"))return!0;if(a.includes("gmail_quote")){if(e.firstElementChild===t)return!1;let a=!1;for(let e=0;e<t.children.length;e++){if("BLOCKQUOTE"===t.children[e].tagName){a=!0;break}}if(!a&&t.firstElementChild){if(t.firstElementChild.className.includes("gmail_attr"))return!0}}return!1},isBlock:(e,a)=>t.isBlock(e,a),replaceText:(e,a,s)=>t.replaceText(e,a,s)}},getRecipientInfo(e){try{if("DIV"===e.tagName){let t=closestElement(e,".nH[role=dialog]");if(t||(t=closestElement(e,"td.I5")),t){const e=t.querySelector("input[name=to]");if(e){const t=TweaksManager._getEmail(e.value),a=TweaksManager._getFullName(e.value);return Promise.resolve({address:t,fullName:a})}}}}catch(e){}return Promise.resolve({address:"",fullName:""})}},{match:{hostname:"tagmanager.google.com"},isElementCompatible:e=>!e.closest(".gtm-veditor_entity-name")&&TweaksManager._isElementCompatibleForGoogleServices(e)},{match:{url:/translate\.google\.[a-z]{2,3}(\.[a-z]{2,3})?\/community/},isElementCompatible:e=>!(!isTextInput(e)||!e.classList.contains("paper-input"))||TweaksManager._isElementCompatibleForGoogleServices(e),getToolbarAppearance(e){const t=isTextInput(e)&&e.classList.contains("paper-input"),a=TweaksManager.DEFAULT_TWEAKS.getToolbarAppearance(e);return{isVisible:(e,s)=>t||a.isVisible(e,s),getPosition:(e,t,s,n,o)=>a.getPosition(e,t,s,n,o),getZIndex:(e,t,s)=>a.getZIndex(e,t,s),getClassName:e=>a.getClassName(e),hasTurnOff:()=>!1,getTurnOffMessage:e=>a.getTurnOffMessage(e)}}},{match:{url:/translate\.google\.[a-z]{2,3}(\.[a-z]{2,3})?/},isElementCompatible:e=>"source"===e.id&&"TEXTAREA"===e.tagName||TweaksManager._isElementCompatibleForGoogleServices(e)},{match:{hostname:/google\.[a-z]{2,3}(\.[a-z]{2,3})?/},isElementCompatible:e=>"tw-source-text-ta"===e.id&&"TEXTAREA"===e.tagName||TweaksManager._isElementCompatibleForGoogleServices(e)},{match:{hostname:["gingersoftware.com","iblogbox.com","prowritingaid.com","grammar.com"]},supported:()=>!1,unsupportedMessage:()=>i18nManager.getMessage("siteCannotBeSupported")},{match:{hostname:"hootsuite.com"},getToolbarAppearance(e){const t=TweaksManager.DEFAULT_TWEAKS.getToolbarAppearance(e),a=Boolean(e.parentElement&&e.parentElement.closest(".rc-TextArea"));return{isVisible:(e,a)=>t.isVisible(e,a),getPosition(e,s,n,o,r){const i=t.getPosition(e,s,n,!1,r);return a&&i&&i.left?Object.assign({},i,{left:parseInt(i.left)-28+"px"}):i},getZIndex:(e,a,s)=>t.getZIndex(e,a,s),getClassName:e=>t.getClassName(e),hasTurnOff:()=>!1,getTurnOffMessage:e=>t.getTurnOffMessage(e)}}},{match:{hostname:"app.karbonhq.com"},getParsingDetector(e){const t=TweaksManager.DEFAULT_TWEAKS.getParsingDetector(e);return{isIgnored:e=>t.isIgnored(e),isSignature:e=>"string"==typeof e.className&&e.className.includes("karbon-email-sig"),isQuote:e=>t.isQuote(e),isBlock:(e,a)=>t.isBlock(e,a),replaceText:(e,a,s)=>t.replaceText(e,a,s)}}},{match:{hostname:["languagetoolplus.com","languagetool.com","languagetool.org"]},init(){if(!/^(www\.)?languagetool(plus)?\.com/.test(location.hostname))return;const e=StorageController.create();e.onReady(()=>{const t=e.getActiveCoupon();t&&document.documentElement&&(document.documentElement.setAttribute("data-lt-coupon",t.code),document.documentElement.setAttribute("data-lt-coupon-expires",String(t.expires)),dispatchCustomEvent(document,"lt-update-coupon"))}),document.addEventListener("lt-upgrade",()=>{e.onReady(()=>{if(e.getUIState().hasPaidSubscription)return;Tracker.trackEvent("Action","upgrade"),e.checkForPaidSubscription().catch(e=>{Tracker.trackError("js",`Error checking paid subscripton: ${e&&e.message}`)});const{firstVisit:t}=e.getStatistics();if(t){const e=Math.floor((Date.now()-1e3*t)/1e3/60/60/24);let a=String(e);e>365?a="365+":e>90?a="90+":e>60?a="60+":e>30?a="60+":e>14?a="14+":e>7&&(a="7+"),Tracker.trackEvent("Action","upgrade:days_since_installation",`days:${a}`)}})}),document.addEventListener("lt-open-options",()=>{EnvironmentAdapter.openOptionsPage(void 0,"external")});const t=document.querySelector("#lt-addon-user-token"),a=document.querySelector("#lt-addon-user-email");return t&&a&&e.onReady(()=>{if(Tracker.trackEvent("Action","auto_login:prepare"),e.isUsedCustomServer())return;const{havePremiumAccount:s,username:n,token:o}=e.getSettings();s?s&&a.value.toLowerCase()===n.toLowerCase()?e.updateSettings({username:a.value,password:"",token:t.value}).then(()=>{e.checkForPaidSubscription().catch(e=>{Tracker.trackError("js",`Error checking paid subscripton: ${e&&e.message}`)})}):s&&t.value&&a.value&&t.value===o&&e.updateSettings({username:a.value}):(e.updateSettings({havePremiumAccount:!0,username:a.value,password:"",token:t.value,knownEmail:a.value}).then(()=>{EnvironmentAdapter.startDictionarySync(),e.checkForPaidSubscription().catch(e=>{Tracker.trackError("js",`Error checking paid subscripton: ${e&&e.message}`)})}),Tracker.trackEvent("Action","auto_login:success"))}),location.href.includes("/webextension/upgrade")&&e.onReady(()=>{const{premiumClicks:t}=e.getStatistics();e.updateStatistics({premiumClicks:t+1}),Tracker.trackEvent("Action","pricing_table:view")}),TweaksManager.DEFAULT_TWEAKS.init()},isElementCompatible:e=>!e.classList.contains("mceContentBody")&&TweaksManager.DEFAULT_TWEAKS.isElementCompatible(e)},{match:{hostname:"linkedin.com"},getToolbarAppearance(e){const t=TweaksManager.DEFAULT_TWEAKS.getToolbarAppearance(e),a=!!e.closest("#msg-overlay");return{isVisible:(e,a)=>!document.querySelector(".msg-form__hovercard.active")&&t.isVisible(e,a),getPosition(e,s,n,o,r){const i=t.getPosition(e,s,n,!1,r);return i&&i.top&&a?Object.assign(i,{top:parseInt(i.top)-n.getDocumentScroll().top+"px",fixed:!0}):i},getZIndex:(e,a,s)=>t.getZIndex(e,a,s),getClassName:e=>t.getClassName(e),hasTurnOff:()=>!1,getTurnOffMessage:e=>t.getTurnOffMessage(e)}}},{match:{hostname:"liveworksheets.com"},getToolbarAppearance(e){const t=TweaksManager.DEFAULT_TWEAKS.getToolbarAppearance(e);return{isVisible(e,t){const a=t.getBorderBox(e);return a.width>=300&&a.height>=75},getPosition:(e,a,s,n,o)=>t.getPosition(e,a,s,n,o),getZIndex:(e,a,s)=>t.getZIndex(e,a,s),getClassName:e=>t.getClassName(e),hasTurnOff:()=>!1,getTurnOffMessage:e=>t.getTurnOffMessage(e)}}},{match:{hostname:"e.mail.ru"},isElementCompatible:e=>"content"!==e.dataset.signatureWidget&&TweaksManager.DEFAULT_TWEAKS.isElementCompatible(e),getRecipientInfo(e){try{if(e.classList.contains("cke_editable")){const t=closestElement(e,"div.compose-app_popup");if(t){const e=t.querySelector("div[class*=contactsContainer] div[class*=contact][data-type=to] > * > div[class*=status_base][title]");if(e){const t=e.querySelector("span[class*=text]");if(t){const a=TweaksManager._getEmail(e.title),s=TweaksManager._getFullName(t.textContent||"");return Promise.resolve({address:a,fullName:s})}}}}}catch(e){}return Promise.resolve({address:"",fullName:""})}},{match:{url:/\/appsuite/},getParsingDetector(e){const t=TweaksManager.DEFAULT_TWEAKS.getParsingDetector(e);return{isIgnored:e=>t.isIgnored(e),isSignature:e=>"string"==typeof e.className&&e.className.includes("ox-signature"),isQuote:e=>!1,isBlock:(e,a)=>t.isBlock(e,a),replaceText:(e,a,s)=>t.replaceText(e,a,s)}},getRecipientInfo(e){try{const t="BODY"===e.tagName&&"tinymce"===e.id,a="TEXTAREA"===e.tagName&&e.parentElement&&e.parentElement.classList.contains("editor");if(t||a){const t=closestElement(window.frameElement||e,".window-container[role=dialog]");if(t){const e=t.querySelector(".tokenfield .token span.token-label");if(e){const t=TweaksManager._getEmail(e.title),a=TweaksManager._getFullName(e.title);return Promise.resolve({address:t,fullName:a})}}}}catch(e){}return Promise.resolve({address:"",fullName:""})}},{match:{url:/\/statamic/},getHighlighterAppearance(e){const t=e.closest(".bard-editor"),a=TweaksManager.DEFAULT_TWEAKS.getHighlighterAppearance(e);return{getZIndex(e,s){let n=a.getZIndex(e,s);if("auto"!==n&&t&&t.parentElement){const e=t.parentElement.querySelector(".bard-link-toolbar");if(e&&e.offsetHeight>0)return n-1}return n}}}},{match:{hostname:"minds.com"},getToolbarAppearance(e){const t=TweaksManager.DEFAULT_TWEAKS.getToolbarAppearance(e);return{isVisible:(e,a)=>t.isVisible(e,a),getPosition(e,a,s,n,o){const r=t.getPosition(e,a,s,!1,o);return r&&r.left&&e.closest(".m-modal-remind-composer")&&(r.left=parseInt(r.left)-27+"px"),r},getZIndex:(e,a,s)=>t.getZIndex(e,a,s),getClassName:e=>t.getClassName(e),hasTurnOff:()=>!1,getTurnOffMessage:e=>t.getTurnOffMessage(e)}}},{match:{hostname:"onedrive.live.com"},supported:()=>!1,unsupportedMessage:()=>i18nManager.getMessage("msOnlineOfficeNotSupported","https://appsource.microsoft.com/de-de/product/office/WA104381727")},{match:{url:/\/otrs/},getParsingDetector(e){const t=TweaksManager.DEFAULT_TWEAKS.getParsingDetector(e);return{isIgnored:e=>t.isIgnored(e),isSignature:e=>!1,isQuote:e=>"cite"===e.getAttribute("type"),isBlock:(e,a)=>t.isBlock(e,a),replaceText:(e,a,s)=>t.replaceText(e,a,s)}}},{match:{hostname:"overleaf.com"},supported:()=>!1,unsupportedMessage:()=>i18nManager.getMessage("siteCannotBeSupported"),init(){const e=StorageController.create();e.onReady(()=>{e.updateStatistics({isOverleafUser:!0})})},onElement(e){Overleaf.onInputAreaAvailable(e)},isElementCompatible:e=>Overleaf.isEditorPage()?Overleaf.isElementCompatible(e):TweaksManager.DEFAULT_TWEAKS.isElementCompatible(e),getParsingDetector(e){const t=TweaksManager.DEFAULT_TWEAKS.getParsingDetector(e);return{isIgnored:e=>Overleaf.isEditorPage()?Overleaf.isElementIgnored(e):t.isIgnored(e),isSignature:e=>!1,isQuote:e=>!1,isBlock:(e,a)=>t.isBlock(e,a),replaceText:(e,a,s)=>t.replaceText(e,a,s)}},applyFix:e=>Overleaf.isEditorPage()?Overleaf.applyFix(e):TweaksManager.DEFAULT_TWEAKS.applyFix(e)},{match:{hostname:["outlook.live.com","outlook.office365.com","outlook.office.com"]},isElementCompatible:e=>!("true"!==e.getAttribute("contenteditable")||!/nachricht|mensaje|missatge|message|mensagem|bericht|messaggio|wiadomości|meddelandetext|brødtekst|meldingstekst/i.test(e.getAttribute("aria-label")||""))||TweaksManager.DEFAULT_TWEAKS.isElementCompatible(e),getParsingDetector(e){const t=TweaksManager.DEFAULT_TWEAKS.getParsingDetector(e),a=e.querySelector("#signature, #Signature");if(a&&!a.hasAttribute(TweaksManager.SIGNATURE_ACTIVE_ATTRIBUTE)){a.setAttribute(TweaksManager.SIGNATURE_ACTIVE_ATTRIBUTE,"");let e=[a];(e=(e=e.concat(Array.from(a.querySelectorAll("*")))).concat(Array.from(a.children))).forEach(e=>{hasTextNodeChildWithContent(e)&&e.setAttribute(TweaksManager.SIGNATURE_ATTRIBUTE,"")})}return{isIgnored:e=>t.isIgnored(e),isSignature:e=>e.hasAttribute(TweaksManager.SIGNATURE_ATTRIBUTE),isQuote:e=>"divRplyFwdMsg"===e.id||!!e.previousElementSibling&&"divRplyFwdMsg"===e.previousElementSibling.id,isBlock:(e,a)=>t.isBlock(e,a),replaceText:(e,a,s)=>t.replaceText(e,a,s)}},getRecipientInfo(e){try{if("DIV"===e.tagName&&"textbox"===e.getAttribute("role")){const t=document.querySelector(".ms-BasePicker-text [aria-label]");if(t){const e=t.getAttribute("aria-label")||"",a=TweaksManager._getEmail(e),s=TweaksManager._getFullName(e);return Promise.resolve({address:a,fullName:s})}const a=e.closest(".customScrollBar");if(a){const e=a.querySelector(".allowTextSelection span.lpc-hoverTarget[role=button][aria-haspopup=dialog] span");if(e){const t=e.textContent||"",a=TweaksManager._getEmail(t),s=TweaksManager._getFullName(t);return Promise.resolve({address:a,fullName:s})}}}}catch(e){}return Promise.resolve({address:"",fullName:""})},initElement(e){const t=(Number(e.getAttribute("data-lt-outlook-tweaks"))||0)+1;return document.documentElement.setAttribute("data-lt-outlook-tweaks",String(t)),{destroy(){const t=(Number(e.getAttribute("data-lt-outlook-tweaks"))||0)-1;t<=0?document.documentElement.removeAttribute("data-lt-outlook-tweaks"):document.documentElement.setAttribute("data-lt-outlook-tweaks",String(t))}}}},{match:{hostname:"prezi.com"},supported:()=>!1,unsupportedMessage:()=>i18nManager.getMessage("siteCannotBeSupported")},{match:{hostname:"mail.protonmail.com"},getParsingDetector(e){const t=TweaksManager.DEFAULT_TWEAKS.getParsingDetector(e);return{isIgnored:e=>t.isIgnored(e),isSignature:e=>"string"==typeof e.className&&e.className.includes("protonmail_signature"),isQuote:e=>!1,isBlock:(e,a)=>t.isBlock(e,a),replaceText:(e,a,s)=>t.replaceText(e,a,s)}}},{match:{hostname:"rambler.ru"},getRecipientInfo(e){try{if("BODY"===e.tagName&&"tinymce"===e.id){const e=window.parent.document.querySelector("div[class*=Fields-receiverWrapper] div[class*=Fields-inputWrapper] span[class*=EmailBadge-root] span[class*=EmailBadge-text]");if(e){const t=e.textContent||"",a=TweaksManager._getEmail(t),s=TweaksManager._getFullName(t);return Promise.resolve({address:a,fullName:s})}}if("TEXTAREA"===e.tagName&&e.classList.contains("QuickReply-textarea-3R")){const e=document.querySelector("div[class*=LetterHeader-from] span[class*=ContactWithDropdown-headerEmail]"),t=document.querySelector("div[class*=LetterHeader-from] span[class*=ContactWithDropdown-headerName]");if(e&&t){const a=TweaksManager._getEmail(e.textContent||""),s=TweaksManager._getFullName(t.textContent||"");return Promise.resolve({address:a,fullName:s})}}}catch(e){}return Promise.resolve({address:"",fullName:""})}},{match:{hostname:"reverso.net"},isElementCompatible:e=>"txtSource"===e.id&&"TEXTAREA"===e.tagName||TweaksManager.DEFAULT_TWEAKS.isElementCompatible(e),getToolbarAppearance(e){const t=TweaksManager.DEFAULT_TWEAKS.getToolbarAppearance(e);return{isVisible:(e,a)=>t.isVisible(e,a),getPosition(e,a,s,n,o){const r=t.getPosition(e,a,s,!1,o);return r&&r.top&&"txtSource"===e.id&&document.querySelector("#lnkSpeller:not(.bottom)")&&(r.top=parseInt(r.top)-28+"px"),r},getZIndex:(e,a,s)=>t.getZIndex(e,a,s),getClassName:e=>t.getClassName(e),hasTurnOff:()=>!1,getTurnOffMessage:e=>t.getTurnOffMessage(e)}}},{match:{hostname:"slack.com"},isElementCompatible(e){const t=e.parentElement;return!(!t||"focusable_search_input"===t.getAttribute("data-qa"))&&("message_input"===t.getAttribute("data-qa")||TweaksManager.DEFAULT_TWEAKS.isElementCompatible(e))},getToolbarAppearance(e){const t=e.closest("[data-view-context='message-pane'], [data-view-context='threads-flexpane'], [data-qa='message_editor']"),a=TweaksManager.DEFAULT_TWEAKS.getToolbarAppearance(e);return t&&e.classList.contains("ql-editor")?{isVisible:e=>!0,getPosition(e,t,a,s,n){let o=parseInt(a.getStyle(e,"padding-top")),r=parseInt(a.getStyle(e,"padding-bottom"));const i=a.getBorderBox(e);o>0&&0===r&&(r=o,i.bottom+=o,i.height+=o);const l=parseInt(a.getStyle(e,"padding-right"))+2,g=parseInt(a.getStyle(e,"line-height"))+o+r;return{fixed:!1,left:Math.round(i.right-l-n.width)+"px",top:Math.round(i.bottom-n.height+(n.height-g)/2)+"px"}},getZIndex:(e,t,s)=>a.getZIndex(e,t,s),getClassName:e=>a.getClassName(e),hasTurnOff:()=>!1,getTurnOffMessage:e=>a.getTurnOffMessage(e)}:a},getParsingDetector(e){const t=TweaksManager.DEFAULT_TWEAKS.getParsingDetector(e);return{isIgnored:e=>"TS-MENTION"!==e.tagName&&"IMG"!==e.tagName&&t.isIgnored(e),isSignature:e=>!1,isQuote:e=>!1,isBlock:(e,a)=>t.isBlock(e,a),replaceText:(e,a,s)=>t.replaceText(e,a,s)}}},{match:{hostname:"my.smashdocs.net"},supported:()=>!1,unsupportedMessage:()=>i18nManager.getMessage("siteCannotBeSupported")},{match:{hostname:"spanishdict.com"},isElementCompatible:e=>"query"!==e.id&&TweaksManager.DEFAULT_TWEAKS.isElementCompatible(e)},{match:{hostname:"pipedrive.com"},getParsingDetector(e){const t=TweaksManager.DEFAULT_TWEAKS.getParsingDetector(e);return{isIgnored:e=>t.isIgnored(e),isSignature:e=>e.hasAttribute("data-pipedrivesignature"),isQuote:e=>"blockQuoteWrapper"===e.getAttribute("data-type"),isBlock:(e,a)=>t.isBlock(e,a),replaceText:(e,a,s)=>t.replaceText(e,a,s)}}},{match:{hostname:"email.t-online.de"},getParsingDetector(e){const t=TweaksManager.DEFAULT_TWEAKS.getParsingDetector(e);return{isIgnored:e=>t.isIgnored(e),isSignature:e=>!1,isQuote:e=>"P"===e.tagName&&e.textContent.trim().startsWith("-----Original-Nachricht"),isBlock:(e,a)=>t.isBlock(e,a),replaceText:(e,a,s)=>t.replaceText(e,a,s)}},getRecipientInfo(e){try{const e=window.parent.document.querySelector(".multiObjectInputfield-object-text");if(e){const t=TweaksManager._getEmail(e.getAttribute("title")||""),a=TweaksManager._getFullName(e.textContent||"");return Promise.resolve({address:t,fullName:a})}}catch(e){}return Promise.resolve({address:"",fullName:""})}},{match:{hostname:"mail.missiveapp.com"},getParsingDetector(e){const t=TweaksManager.DEFAULT_TWEAKS.getParsingDetector(e);return{isIgnored:e=>t.isIgnored(e),isSignature:e=>Boolean(e.matches&&e.matches("[data-missive-marker=signature_start] ~ *")),isQuote:e=>!1,isBlock:(e,a)=>t.isBlock(e,a),replaceText:(e,a,s)=>t.replaceText(e,a,s)}}},{match:{hostname:"web.telegram.org"},getToolbarAppearance(e){const t=TweaksManager.DEFAULT_TWEAKS.getToolbarAppearance(e);return{isVisible:(e,a)=>t.isVisible(e,a),getPosition(e,a,s,n,o){if(e.classList.contains("composer_rich_textarea")){let t=s.getPaddingBox(e),a=t.bottom-4-o.height,n=t.right-4-o.width;return{fixed:!1,left:Math.round(n)+"px",top:Math.round(a)+"px"}}return t.getPosition(e,a,s,n,o)},getZIndex:(e,a,s)=>t.getZIndex(e,a,s),getClassName:e=>t.getClassName(e),hasTurnOff:()=>!1,getTurnOffMessage:e=>t.getTurnOffMessage(e)}}},{match:{hostname:"trello.com"},getToolbarAppearance(e){const t=TweaksManager.DEFAULT_TWEAKS.getToolbarAppearance(e);return{isVisible:(e,a)=>!document.querySelector(".pop-over.is-shown")&&t.isVisible(e,a),getPosition:(e,a,s,n,o)=>t.getPosition(e,a,s,n,o),getZIndex:(e,a,s)=>t.getZIndex(e,a,s),getClassName:e=>t.getClassName(e),hasTurnOff:()=>!1,getTurnOffMessage:e=>t.getTurnOffMessage(e)}}},{match:{hostname:"twitch.tv"},getToolbarAppearance(e){const t=e.getAttribute("data-a-target"),a="chat-input"===t,s="video-chat-input"===t,n=TweaksManager.DEFAULT_TWEAKS.getToolbarAppearance(e);return{isVisible:(e,t)=>n.isVisible(e,t),getPosition(e,t,o,r,i){const l=n.getPosition(e,t,o,!1,i);if(a&&l&&l.left){const t=!(!e.parentElement||!e.parentElement.querySelector("[data-a-target=bits-button]"));return Object.assign(l,{left:parseInt(l.left)-(t?60:25)+"px"})}return s&&l&&l.left&&l.top?Object.assign(l,{left:parseInt(l.left)+3+"px",top:parseInt(l.top)+5+"px"}):l},getZIndex:(e,t,a)=>n.getZIndex(e,t,a),getClassName:e=>n.getClassName(e),hasTurnOff:()=>!1,getTurnOffMessage:e=>n.getTurnOffMessage(e)}}},{match:{hostname:"twitter.com"},getToolbarAppearance(e){const t=TweaksManager.DEFAULT_TWEAKS.getToolbarAppearance(e);return{isVisible:(e,a)=>t.isVisible(e,a,20),getPosition:(e,a,s,n,o)=>t.getPosition(e,a,s,n,o),getZIndex:(e,a,s)=>t.getZIndex(e,a,s),getClassName:e=>t.getClassName(e),hasTurnOff:()=>!1,getTurnOffMessage:e=>t.getTurnOffMessage(e)}}},{match:{hostname:"upwork.com"},getToolbarAppearance(e){const t=window.innerWidth>=768&&e.classList.contains("msg-composer-input"),a=TweaksManager.DEFAULT_TWEAKS.getToolbarAppearance(e);return{isVisible(e,t){const a=t.getBorderBox(e);return a.width>=160&&a.height>=19},getPosition(e,s,n,o,r){if(t){const t=-54,a=0,s=n.getBorderBox(e);return{fixed:!1,left:Math.round(s.right-t-r.width)+"px",top:Math.round(s.bottom-a-r.height)+"px"}}return a.getPosition(e,s,n,o,r)},getZIndex:(e,t,s)=>a.getZIndex(e,t,s),getClassName:e=>a.getClassName(e),hasTurnOff:()=>!1,getTurnOffMessage:e=>a.getTurnOffMessage(e)}}},{match:{hostname:"vk.com"},getToolbarAppearance(e){const t=e.classList.contains("reply_field"),a=!!e.closest(".im-page--chat-input"),s=TweaksManager.DEFAULT_TWEAKS.getToolbarAppearance(e);return{isVisible(e,t){if("post_field"===e.id){const a=50;return t.getBorderBox(e).height>=a}return!e.classList.contains("page_status_input")&&s.isVisible(e,t)},getPosition(e,n,o,r,i){const l=s.getPosition(e,n,o,!1,i);if(!l||!l.top)return l;if(t){const t=parseInt(o.getStyle(e,"padding-right"));return Object.assign(l,{left:Math.round(parseInt(l.left)-t)+"px"})}if(a){const t=parseInt(o.getStyle(e,"padding-right"));return Object.assign(l,{left:Math.round(parseInt(l.left)-t)+"px",top:parseInt(l.top)-o.getDocumentScroll().top+"px",fixed:!0})}return l},getZIndex:(e,t,a)=>s.getZIndex(e,t,a),getClassName:e=>s.getClassName(e),hasTurnOff:()=>!1,getTurnOffMessage:e=>s.getTurnOffMessage(e)}}},{match:{hostname:"web.whatsapp.com"},getToolbarAppearance(e){const t=TweaksManager.DEFAULT_TWEAKS.getToolbarAppearance(e);return{isVisible:(e,a)=>a.getPaddingBox(e).width>350||t.isVisible(e,a),getPosition:(e,a,s,n,o)=>t.getPosition(e,a,s,n,o),getZIndex:(e,a,s)=>t.getZIndex(e,a,s),getClassName:e=>t.getClassName(e),hasTurnOff:()=>!1,getTurnOffMessage:e=>t.getTurnOffMessage(e)}}},{match:{hostname:"writeandimprove.com"},isElementCompatible:e=>!(!e.hasAttribute("data-question-id")||"TEXTAREA"!==e.tagName)||TweaksManager.DEFAULT_TWEAKS.isElementCompatible(e)},{match:{hostname:"mail.yahoo.com"},isElementCompatible:e=>!(!e.parentElement||"editor-container"!==e.parentElement.id||"true"!==e.getAttribute("contenteditable"))||TweaksManager.DEFAULT_TWEAKS.isElementCompatible(e),getParsingDetector(e){const t=TweaksManager.DEFAULT_TWEAKS.getParsingDetector(e);return{isIgnored:e=>t.isIgnored(e),isSignature:e=>"string"==typeof e.className&&e.className.includes("signature"),isQuote:e=>"string"==typeof e.className&&e.className.includes("yahoo_quoted"),isBlock:(e,a)=>t.isBlock(e,a),replaceText:(e,a,s)=>t.replaceText(e,a,s)}},getRecipientInfo(e){try{const e=document.querySelector("[data-test-id='email-pill'] [data-test-id='pill']");if(e)return Promise.resolve({address:TweaksManager._getEmail(e.getAttribute("title")||""),fullName:e.innerText.trim()})}catch(e){}return Promise.resolve({address:"",fullName:""})}},{match:{hostname:["mail.yandex.com","mail.yandex.ru","mail.yandex.uz","mail.yandex.lv","mail.yandex.ua","mail.yandex.co.il"]},getRecipientInfo(e){try{if("DIV"===e.tagName&&e.classList.contains("cke_wysiwyg_div")&&e.classList.contains("cke_editable")){const e=document.querySelector("div[name=to] span[bubble][data-yabble-email]");if(e){const t=TweaksManager._getEmail(e.dataset.yabbleEmail||""),a=TweaksManager._getFullName(e.dataset.yabbleName||"");return Promise.resolve({address:t,fullName:a})}const t=document.querySelector("span.mail-Message-Sender-Email"),a=document.querySelector("span.mail-Message-Sender-Name");if(t&&a){const e=TweaksManager._getEmail(t.textContent||""),s=TweaksManager._getFullName(a.textContent||"");return Promise.resolve({address:e,fullName:s})}}}catch(e){}return Promise.resolve({address:"",fullName:""})},isClickIgnored(e){const t=e.target;return!!t&&isTextArea(t)&&"editor1"===t.id}},{match:{hostname:["translate.yandex.com","translate.yandex.ru","translate.yandex.uz","translate.yandex.lv","translate.yandex.ua","translate.yandex.co.il"]},isElementCompatible:e=>"fakeArea"===e.id&&e.isContentEditable||TweaksManager.DEFAULT_TWEAKS.isElementCompatible(e)},{match:{hostname:"youtube.com"},getToolbarAppearance(e){const t=TweaksManager.DEFAULT_TWEAKS.getToolbarAppearance(e);return{isVisible:(e,a)=>t.isVisible(e,a,20),getPosition:(e,a,s,n,o)=>t.getPosition(e,a,s,n,o),getZIndex:(e,a,s)=>t.getZIndex(e,a,s),getClassName:e=>t.getClassName(e),hasTurnOff:()=>!1,getTurnOffMessage:e=>t.getTurnOffMessage(e)}}},{match:{hostname:["mail.zoho.com","mail.zoho.eu"]},getParsingDetector(e){const t=TweaksManager.DEFAULT_TWEAKS.getParsingDetector(e);return{isIgnored:e=>t.isIgnored(e),isSignature:e=>e.id.startsWith("Zm-_Id_-Sgn"),isQuote:e=>e.classList.contains("zmail_extra"),isBlock:(e,a)=>t.isBlock(e,a),replaceText:(e,a,s)=>t.replaceText(e,a,s)}}},{match:{hostname:["social.zoho.com","social.zoho.eu"]},getToolbarAppearance(e){const t=TweaksManager.DEFAULT_TWEAKS.getToolbarAppearance(e);return{isVisible:(e,a)=>t.isVisible(e,a),getPosition(e,a,s,n,o){const r=t.getPosition(e,a,s,!1,o);return r&&r.left&&e.classList.contains("inputBox")&&(r.left=parseInt(r.left)-26+"px"),r},getZIndex:(e,a,s)=>t.getZIndex(e,a,s),getClassName:e=>t.getClassName(e),hasTurnOff:()=>!1,getTurnOffMessage:e=>t.getTurnOffMessage(e)}}},{match:{hostname:["writer.zoho.com","writer.zoho.eu"]},supported:()=>!1,unsupportedMessage:()=>i18nManager.getMessage("siteCannotBeSupported")},{match:{hostname:"xing.com"},getToolbarAppearance(e){const t=TweaksManager.DEFAULT_TWEAKS.getToolbarAppearance(e),a=!!e.closest("[class*='presentational-message-composer'");return{isVisible:(e,a)=>t.isVisible(e,a),getPosition:(e,a,s,n,o)=>t.getPosition(e,a,s,n,o),getZIndex(e,s,n){const o=t.getZIndex(e,s,n);return a?Math.max(3,Number(o)||0):o},getClassName:e=>t.getClassName(e),hasTurnOff:()=>!1,getTurnOffMessage:e=>t.getTurnOffMessage(e)}}},{match:{hostname:"yicat.vip"},isElementCompatible:e=>!("true"!==e.getAttribute("contenteditable")||!e.classList.contains("atoms-edit"))||TweaksManager.DEFAULT_TWEAKS.isElementCompatible(e)},{match:{hostname:"zybuluo.com"},isElementCompatible:e=>"TEXTAREA"===e.tagName&&"wmd-input"===e.id||TweaksManager.DEFAULT_TWEAKS.isElementCompatible(e)},{match:{hostname:"blogger.com"},isElementCompatible:e=>"postingHtmlBox"!==e.id&&TweaksManager.DEFAULT_TWEAKS.isElementCompatible(e)}],"undefined"!=typeof module&&(module.exports=TweaksManager);