/* Copyright 2011 Google Inc. All Rights Reserved. */ (function(){var c=0,d=null,e=null,f=null,g=null,h=null,k=null,n=null,p=function(a){a.target="_blank";a.addEventListener("click",function(){window.close()},!1)},r=function(){var a;if(a=e.value.replace(/^\s+|\s+$/g,""))g.innerHTML="Searching...",f.style.display="block",h.style.display="none",k.style.display="none",n.style.display="none",d.disabled=!0,c++,chrome.runtime.sendMessage({type:"fetch_html",eventKey:c,query:a},q)},q=function(a){if(a.eventKey===c){if(a.html){n.innerHTML=a.html;var b=n.querySelectorAll(".audio");
for(a=0;a<b.length;a++){var l=b[a],m=document.createElement("audio");m.preload=!0;""===l.getAttribute("data-url")&&(l.style.display="none");m.src=l.getAttribute("data-url");l.addEventListener("click",m.play.bind(m),!1)}b=n.querySelectorAll(".nym-link");for(a=0;a<b.length;a++)b[a].addEventListener("click",function(){e.value=this.title?this.title:this.innerHTML;r();return!1},!1);b=n.querySelectorAll('a:not([class="nym-link"])');for(a=0;a<b.length;a++)p(b[a]);f.style.display="none";n.style.display="block"}else g.innerHTML=
"No definition found.",f.style.display="block",h.href="https://www.google.com/search?q="+a.sanitizedQuery,h.innerHTML='Search the web for "'+a.sanitizedQuery+'" &raquo;',h.style.display="block";d.disabled=!1}};d=document.getElementById("define-btn");e=document.getElementById("query-field");f=document.getElementById("status-box");g=document.getElementById("status-msg");h=document.getElementById("status-search-link");k=document.getElementById("usage-tip");n=document.getElementById("meaning");
k.display="block";k.innerText="Tip: Select text on any webpage, then click the Google Dictionary button to view the definition of your selection.";document.getElementById("year").innerText=(new Date).getFullYear();p(h);p(document.getElementById("options-link"));e.focus();d.addEventListener("click",r,!1);e.addEventListener("keydown",function(a){13===a.keyCode&&r()},!1);
chrome.tabs.query({active:!0,currentWindow:!0},function(a){a.length&&(console.assert(1===a.length),chrome.tabs.sendMessage(a[0].id,{type:"get_selection"},function(b){b&&b.selection&&(e.value=b.selection,r())}))});})();
