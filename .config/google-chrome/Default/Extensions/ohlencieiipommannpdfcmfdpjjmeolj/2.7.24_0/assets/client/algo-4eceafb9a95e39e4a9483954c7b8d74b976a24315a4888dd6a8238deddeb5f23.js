function MySimpleMap(){this.size=0,this.store={}}function memoize(e){var t={};return function(){var i=arguments[0];if(t[i])return t[i];var n=e.apply(this,arguments);return t[i]=n,n}}function copyDataset(e,t){for(var i in t.dataset)e.dataset[i]=t.dataset[i]}function forEachNodeChild(e,t){if(e)for(var i=Array.prototype.slice.call(e.childNodes),n=0,a=i.length;n<a;n++)t(i[n])}function toBase64URL(e,t){if(!pfData.userSettings.encodeImages||e.startsWith("data:"))return t(e);var i=new XMLHttpRequest;i.onload=function(){var e=new FileReader;e.onloadend=function(){t(e.result)},e.readAsDataURL(i.response)},i.onerror=function(){t(e)},i.open("GET",e),i.responseType="blob",i.send()}Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),i=t.length;--i>=0&&t.item(i)!==this;);return i>-1}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=!t||t<0?0:+t,this.substring(t,t+e.length)===e});var logger=function(){var e={init:function(t){$.each(["log","error","time","timeEnd"],function(i,n){"development"===t.config.environment?e[n]=Function.prototype.bind.call(console[n],console):e[n]=$.noop})}};return e}(),commonUtils={hasClass:function(e,t){return e.nodeType===Node.ELEMENT_NODE&&(e.classList?e.classList.contains(t):(e.getAttribute("class")||"").split(/\s/).indexOf(t)>=0)},addClassTo:function(e,t){e.nodeType===Node.ELEMENT_NODE&&(commonUtils.hasClass(e,t)||(e.classList?e.classList.add(t):e.className=(e.className||"")+" "+t))},removeClassFrom:function(e,t){if(e.nodeType===Node.ELEMENT_NODE&&commonUtils.hasClass(e,t))if(e.classList)e.classList.remove(t);else{var i=(e.getAttribute("class")||"").split(" "),n=i.indexOf(t);n>=0&&i.splice(n,1),e.setAttribute("class",i.join(" "))}},getImageWidth:function(e,t){e.jquery&&(e=e[0]);var i=null;if(t){var n=e.getAttribute("pf-data-width");n&&(i=parseInt(n,10))}else e.getAttribute("data-pf_rect_width")&&(i=parseInt(e.getAttribute("data-pf_rect_width"),10));return null===i&&(i=e.getBoundingClientRect().width),i},getImageHeight:function(e,t){e.jquery&&(e=e[0]);var i=null;if(t){var n=e.getAttribute("pf-data-height");n&&(i=parseInt(n,10))}else e.getAttribute("data-pf_rect_height")&&(i=parseInt(e.getAttribute("data-pf_rect_height"),10));return null===i&&(i=e.getBoundingClientRect().height),i},getTopWrapper:function(e){var t=e.parentNode;return t.childNodes.length>1?e:this.getTopWrapper(t)},isDeletableElement:function(){return function(e){return!commonUtils.hasClass(e,"non-delete")&&(e.matches("small, footer, header, aside, details, dialog, figure, nav, summary, twitter-widget, p, img, blockquote, h1, h2, h3, h4, h5, h6, ol, ul, li, a, table, td, pre, span, code, dl, dt, dd, hr, div.pf-caption, video, figcaption, data")||$(e).find("*:visible").length<=15)}}(),resizeImageCssClass:function(e){return"pf-size-"+e.replace("-size","").replace("-images","")},addCSS:function(e,t,i){var n=i?"body":"head",a=t.getElementsByTagName(n)[0],r=t.createElement("style");r.type="text/css",r.setAttribute("name","pf-style"),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(t.createTextNode(e)),a.appendChild(r)},createIframe:function(e){var t=e.createElement("iframe");return t.frameBorder="0",t.allowTransparency="true",t},loadHtmlInIframe:function(e,t,i){var n,a;try{a=t.contentWindow.document}catch(i){n=e.domain,t.src="javascript:var d=document.open();d.domain='"+n+"';void(0);",a=t.contentWindow.document}a.write(i),a.close()}},analytics=function(){var e=null;return{setCoreWindow:function(t){e=t},sendEvent:function(t,i,n){e.postMessage({type:"PfGaEvent",payload:{category:t,action:i,label:n}},"*")}}}(),exTracker=function(){function e(){return"production"===f.environment}function t(){return"development"===f.environment}function i(){return!!c.Raven}function n(){try{c.frames["pf-core"]&&c.frames["pf-core"].document&&(c=c.frames["pf-core"],d=c.document)}catch(e){}}function a(){if(p)return!0;if(p=!0,n(),null===d)return!1;var e=d.createElement("script"),t=d.getElementsByTagName("script")[0];e.src=this.config.urls.js.raven,t.parentNode.appendChild(e),r()}function r(){if(!i())return setTimeout(r,100);s(),o()}function o(){for(var e=0,t=m.length;e<t;e++){var i=m[e];l(i.err,i.opts)}}function s(){var e={dataCallback:function(e){try{var t=e.stacktrace.frames[0];t.filename.match(g)&&"onload"!==t["function"]||e.stacktrace.frames.shift()}catch(e){}return e},shouldSendCallback:function(e){return!!(e&&e.extra&&e.extra.file)},release:h};c.Raven.config(f.hosts.ravenDsn,e).install()}function l(t,i){i=i?{file:i.file}:{file:"printfriendly.js"},i.usingBM=f.usingBM,i.url=f.urls.page,e()&&c.Raven.captureException(t,{extra:i})}var c=window.top,d=null,p=!1,g=/d3nekkt1lmmhms|printfriendly\.com|printnicer\.com|algo\.js|printfriendly\.js|core\.js/,m=[],u=[],f={},h=null;return{init:function(e,t){f=e.config,h=e.version,"production"!==e.config.environment||e.onServer?t():Raven.context(t)},log:function(e,n){t()&&(console.error(e),console.error(e.stack)),n=n||{file:"printfriendly.js"};try{i()?l(e,n):(m.push({err:e,opts:n}),a(),u.push(e.name+" : "+e.message),u.push(e.stack))}catch(e){}}}}();MySimpleMap.prototype.get=function(e){return this.store[e]},MySimpleMap.prototype.set=function(e,t){this.store[e]===undefined&&this.size++,this.store[e]=t};var commonScore=function(){function e(e){e=e||{};var t=e.words||new MySimpleMap,i=e.links||new MySimpleMap;return{words:t,links:i,uniqWordsCount:t.size,uniqLinksCount:i.size,tagsCount:e.tagsCount||0,hasContentTag:e.hasContentTag||!1,hasTable:e.hasTable||!1}}function t(t){for(var i=new MySimpleMap,n=sliceWordsService(t),a=0,r=n.length;a<r;a++){var o=n[a];i.set(o,(i.get(o)||0)+1)}return e({words:i})}function i(t){var i=t.match(s),n=new MySimpleMap;return i&&n.set(i[2].toLowerCase(),1),e({links:n})}function n(e,t,i){var n=new MySimpleMap,a=e[i].store,r=t[i].store;for(var o in a)n.set(o,a[o]);for(var s in r)n.set(s,(n.get(s)||0)+r[s]);return n}function a(e,t){e.words=n(e,t,"words"),e.links=n(e,t,"links"),e.uniqLinksCount=e.links.size,e.uniqWordsCount=e.words.size,e.hasContentTag=e.hasContentTag||t.hasContentTag,e.hasTable=e.hasTable||t.hasTable,e.tagsCount+=t.tagsCount}function r(n){if(n.node.nodeType===Node.TEXT_NODE&&n.node.parentNode&&isContentNodeHelperService(n.node.parentNode))return t(n.node.textContent);var r=mergeChildrenScoreHelperService(n,o,e(),a);switch(r.hasContentTag=r.hasContentTag||n.nameMatches(l),r.hasTable=r.hasTable||n.hasTagName("table"),r.tagsCount++,n.node.nodeName){case"IMG":var s=n.node.getAttribute("alt"),c=n.node.getAttribute("src");s&&a(r,t(s)),c&&a(r,i(c));break;case"A":var d=n.node.getAttribute("title"),p=n.node.getAttribute("href");d&&a(r,t(d)),p&&a(r,i(p))}return r}var o="common",s=/^https?:\/\/([^\.?]+\.)*([^\.?]+\.[^\.\/?]+)\//,l=/article|main|body|content/i;return function(e){e.registerScoreFunction(o,r)}}(),doubleBrClassifier=function(){function e(e){return e.node.tagName===i||!(0!==e.scores.common.words.size||!e.isElement()||!e.node.querySelector("br"))}function t(t){if(!t.nameMatches(n)){var i=[],a=null,r=0,o=[];t.forEachChild(function(t,n){o.push(t),e(t)?(0===r&&(a=n),r++):r>=2?(i.push([a,n]),r=0):r=0}),r>=2&&i.push([a,t.children.length-1]);for(var s=0,l=0,c=i.length;l<c;l++){var d=i[l],p=t.tree.createElement("p");p.node.setAttribute("class",n);for(var g=s;g<d[0];g++){var m=o[g];m.node&&m.node.parentNode&&(p.parent||m.parent.replaceChild(p,m),p.appendChild(m))}for(var u=d[0];u<d[1];u++)e(o[u])&&o[u].remove();s=d[1]}}}var i="BR",n="pf-br-replacement";return function(e){e.registerBehaviorFunction(t)}}(),emptyTagsClassifier=function(){function e(e){return e.scores[a]}function t(e){return e=e||{},{skipTag:e.skipTag||!1,parentSkipTag:e.parentSkipTag||!1}}function i(i){if(i.node.nodeType!==Node.ELEMENT_NODE)return t();var n=i.node.tagName.toUpperCase();return t({parentSkipTag:r[n]||i.parent&&e(i.parent).parentSkipTag,skipTag:o[n]})}function n(e){var t=i(e);e.scores[a]=t,0!==e.children.length||t.skipTag||t.parentSkipTag||""!==$.trim(e.node.textContent)||e.node.nodeType===Node.ELEMENT_NODE&&e.node.getAttribute("data-pf-allow-empty")||e.remove()}var a="empty_tags",r={AREA:!0,BASE:!0,COL:!0,COMMAND:!0,EMBED:!0,HR:!0,IMG:!0,INPUT:!0,KEYGEN:!0,LINK:!0,META:!0,PARAM:!0,SOURCE:!0,TRACK:!0,WBR:!0,BR:!0,"TWITTER-WIDGET":!0,IFRAME:!0,PRE:!0,SVG:!0},o={I:!0,SPAN:!0,TD:!0,TH:!0};return function(e){e.registerBehaviorFunction(n)}}(),headerFooterClassifier=function(){function e(e){return e=e||{},{contentPoints:e.contentPoints||0,headerPoints:e.headerPoints||0,footerPoints:e.footerPoints||0}}function t(e){return e.scores[p]}function i(e){var t=e.scores.common.uniqWordsCount;return e.scores.common.hasContentTag&&(t+=h),t}function n(e,t,i){var n=0;return e.hasTagName(t)?n=C.TAG_MATCH:e.hasId(t)?n=C.ID_MATCH:e.hasClass(t)?n=C.CLASS_MATCH:e.nameMatches(i)&&(n=C.PARTIAL_REGEXP_MATCH),n}function a(e){var i=null,n=0;return e.forEachChild(function(e){var a=t(e);n<a.contentPoints&&(i=e,n=a.contentPoints)}),i}function r(e,i){for(var n=null,a=0,r=e.children.length;a<r;a++){var o=e.children[a];if(!(t(o)[i]<=0)){if(n)return null;n=o}}return n}function o(e){return r(e,"headerPoints")}function s(e){return r(e,"footerPoints")}function l(t){return e({headerPoints:n(t,m,g),footerPoints:n(t,u,f),contentPoints:i(t)})}function c(e){var t=e.node.tagName;return e.scores.common.hasTable||v.indexOf(t)>=0}function d(e){if(!(e.node.tagName&&b.indexOf(e.node.tagName)>=0)){var i=t(e),n=e.parent&&t(e.parent)||{};if(i.inArticle=n.inArticle||e.hasTagName("article")||!1,!i.inArticle){var r=a(e);if(r){var l=o(e),d=s(e);l&&r!==l&&l.scores.common.tagsCount>y&&!c(l)&&l.remove(),d&&r!==d&&d.scores.common.tagsCount>y&&d.remove()}}}}var p="header_footer",g=/head/i,m="header",u="footer",f=/foot/i,h=1e6,y=3,v=["TABLE","THEAD","TBODY","TR","TH"],b=["H1","H2","H3","H4","H5","H6"],C={TAG_MATCH:4,ID_MATCH:3,CLASS_MATCH:2,PARTIAL_REGEXP_MATCH:1};return function(e){e.registerScoreFunction(p,l),e.registerBehaviorFunction(d)}}(),mustKeepClassifier=function(){function e(e){if(e.nameMatches(t))return void e.keep()}var t=/copyright|delete-no|delete-off|pf-author|print-content|pf-date|pf-title|pf-footer|print-header|print-footer|print-only|print-yes|pf-content/i;return function(t){t.registerMarkFunction(e)}}(),relatedArticlesClassifier=function(){function e(e){return e=e||{},{wordsCount:e.wordsCount||0,insideLinkWordsCount:e.insideLinkWordsCount||0,contentTagsCount:e.contentTagsCount||0,imgTagsCount:e.imgTagsCount||0,aTagsCount:e.aTagsCount||0,hasLongTextNode:e.hasLongTextNode||!1,isDataTag:e.isDataTag||!1,hasIgnoreClasses:e.hasIgnoreClasses||!1,hasInlineLink:e.hasInlineLink||!1,isInlineLink:e.isInlineLink||!1}}function t(e,t){e.wordsCount+=t.wordsCount,e.insideLinkWordsCount+=t.insideLinkWordsCount,e.contentTagsCount+=t.contentTagsCount,e.aTagsCount+=t.aTagsCount,e.imgTagsCount+=t.imgTagsCount,e.hasLongTextNode=e.hasLongTextNode||t.hasLongTextNode,e.hasIgnoreClasses=e.hasIgnoreClasses||t.hasIgnoreClasses,e.hasInlineLink=e.hasInlineLink||t.hasInlineLink}function i(e){var t=e.scores[d];return t.wordsCount!==t.insideLinkWordsCount&&(e.node.nodeType===Node.TEXT_NODE||"inline"===e.node.getAttribute("data-pf_style_display"))}function n(e){var t=!1;return e.forEachChild(function(e){if(e.scores[d].isInlineLink)return t=!0,DomScorerModifier.Intents.BREAK}),t&&!a(e)}function a(e){var t=e.node.textContent;return!!$.trim(t).match(v)}function r(e){for(var t=null,n=e.prev;n;){if($.trim(n.node.textContent)){t=n;break}n=n.prev}return!(!t||!i(t))}function o(e,t){for(var i=null,n=t.getDepthLayer(),a=0,r=0,o=n.length;r<o;r++){var s=n[r];s.node&&(s===t&&(i=a),e.contains(s.node)&&a++)}var l=Math.ceil(a*b),c=Math.floor(a-a*b);return i<=l||i>=c}function s(i){if((i.node.nodeType===Node.TEXT_NODE||"P"===i.node.nodeName)&&i.node.parentNode&&isContentNodeHelperService(i.node.parentNode)){var o=i.node.textContent;if(a(i))return e();var s=sliceWordsService(o).length;return e({wordsCount:s,hasLongTextNode:s>=m})}var l=mergeChildrenScoreHelperService(i,d,e(),t),p=i.node.nodeName;switch(p){case"A":i.node.getAttribute("href")&&"author"!==i.node.getAttribute("rel")&&(l.aTagsCount++,l.insideLinkWordsCount=l.wordsCount,l.hasLongTextNode=!1,l.isInlineLink=r(i));break;case"IMG":l.imgTagsCount++}return l.wordsCount>0&&l.wordsCount>l.insideLinkWordsCount&&isContentNodeHelperService(i.node)&&i.node.parentNode&&i.node.parentNode.childElementCount>1&&l.contentTagsCount++,c[p]&&(l.isDataTag=!0,l.insideLinkWordsCount=0,l.aTagsCount=0,l.imgTagsCount=0),i.nameMatches(y)&&(l.hasIgnoreClasses=!0),l.hasInlineLink=l.hasInlineLink||n(i),l}function l(e,t){var i=e.scores.common;if(!(i.tagsCount>u||i.hasContentTag&&i.uniqWordsCount>200||t.candidate&&t.candidate.contains(e.node)&&!o(t.candidate,e))){var n=e.scores[d];if(n.isDataTag)return DomScorerModifier.Intents.BREAK_TRAVERSAL;if(!(n.hasInlineLink||n.hasIgnoreClasses||n.contentTagsCount>h&&i.uniqWordsCount>100||n.wordsCount<5||n.aTagsCount<2||1===n.imgTagsCount||n.hasLongTextNode)){if(n.imgTagsCount/n.aTagsCount<f){if((n.insideLinkWordsCount/n.wordsCount||0)>=p)return e.remove(),DomScorerModifier.Intents.BREAK_TRAVERSAL;return(n.aTagsCount+n.imgTagsCount)/n.contentTagsCount>=g?(e.remove(),DomScorerModifier.Intents.BREAK_TRAVERSAL):void 0}}}}var c={TABLE:!0,TR:!0,TD:!0},d="relatedArticle",p=.5,g=.5,m=25,u=100,f=2.5,h=25,y=/gallery/i,v=/(\.{3,}|\u2026)$/,b=.2;return function(e){e.registerScoreFunction(d,s),e.registerBehaviorFunction(l,"after")}}(),socialShareClassifier=function(){function e(e){return e=e||{},{imgsCount:e.imgsCount||0,aCount:e.aCount||0,hasShareClass:e.hasShareClass||!1,hasShareImage:e.hasShareImage||!1}}function t(e,t){e.imgsCount+=t.imgsCount,e.aCount+=t.aCount,e.hasShareImage=e.hasShareImage||t.hasShareImage}function i(e){var t=e.className();return!(!t||!c.test(t))}function n(e){if("IMG"!==e.node.tagName)return!1;for(var t=e.node.nextElementSibling;t;){if($(t).find("a").length>1)return!0;t=t.nextElementSibling}return!1}function a(a){var r=e({hasShareClass:i(a),hasShareImage:n(a)}),o=mergeChildrenScoreHelperService(a,u,r,t);switch(a.node.nodeName){case"IMG":o.imgsCount++;break;case"A":o.aCount++}return o.hasShareClass=i(a),o}function r(e){var t=0;for(var i in e)"number"==typeof e[i]&&(t+=e[i]);return t}function o(e,t){for(var i=0,n=0,a=0,o=e.length;a<o;a++){var s=e[a],l=t.get(s);l&&(n++,i+=l)}var c=r(t.store);return{relatedCount:i,totalCount:c,relatedUniqCount:n,totalUniqCount:t.size,ratio:i/c||0}}function s(e){var t=e.scores[u];if(t.hasShareImage)return 0;if(t.hasShareClass)return 1;var i=o(d,e.scores.common.words);if(i.totalUniqCount>m)return 0;var n=o(p,e.scores.common.links);return 2*(i.relatedUniqCount>1?i.ratio:0)+(n.relatedUniqCount>1?n.ratio:0)}function l(e){if(!e.children.length)return DomScorerModifier.Intents.DO_NOTHING;var t=e.className(),i=e.node.tagName;return"TWITTER-WIDGET"===i||"BLOCKQUOTE"===i&&t.indexOf("twitter-tweet")>=0?(e.keep(),DomScorerModifier.Intents.BREAK_TRAVERSAL):s(e)>g?(e.remove(),DomScorerModifier.Intents.BREAK_TRAVERSAL):void 0}var c=/fb-like|daftplugPublicFacebookReactionsNotification|daftplugPublicFacebookReactionsNotification_container|daftplugPublicFacebookReactionsNotification_postTitle|daftplugPublicFacebookReactionsNotification_postTitle|socializer-share-bar|PIN_\d+/,d=["facebook","google","stumbleupon","reddit","pinterest","printfriendly","yum","twitter","tweet","linkedin","share","shares","print","tumblr","rss","youtube","social"],p=["twitter.com","facebook.com","reddit.com","myspace.com","stumbleupon.com","mix.com","mixx.com","viadeo.com","yummly.com","addthis.com","google.com","pinterest.com","printfriendly.com","mailto:","tumblr.com","linkedin.co","digg.com","whatsapp.com","vk.com","weibo.com","ok.ru","odnoklassniki.ru","xing.com","blogger.com","flipboard.com","meneame.net","mail.ru","icio.us","livejournal.com","delicious.com","youtube.com"],g=.3,m=25,u="shareScore";return function(e){e.registerScoreFunction(u,a),e.registerBehaviorFunction(l)}}(),DomScorerModifier=function(){function e(e){return e.nodeType===Node.TEXT_NODE&&!$.trim(e.nodeValue)}function t(e){return e instanceof i?e:e[c]}function i(e){this.node=e.node,this.node[c]=this,this.parent=e.parent,this.tree=e.tree,this.depth=e.depth||0,this.scores={},this.skipped=!1,this.hasScore=!1,this.keptChildren=[],this.children=[],this.prev=e.prev||null,this.next=null}function n(e){e.parent&&(e.skipped=!0)}function a(e,t){for(var i=e;i;)i.keptChildren.push(t),i=i.parent}function r(t,n){this.root=new i({tree:this,node:t}),this.scorer=n;for(var a=[this.root],r=null;r=a.shift();)for(var o=null,s=0,l=r.node.childNodes.length;s<l;s++){var c=r.node.childNodes[s];if(!e(c)&&c.nodeType!==Node.COMMENT_NODE&&"SCRIPT"!==c.tagName){var d=new i({tree:r.tree,parent:r,node:c,depth:r.depth+1,prev:o});o&&(o.next=d),o=d,r.children.push(d),a.push(d)}}}function o(){this.tree=new r(document.body,this),this.scoreFunctions={},this.markFunctions=[],this.behaviorFunctions={before:[],after:[]}}function s(e,t){for(var i=0,n=e.markFunctions.length;i<n;i++)e.markFunctions[i](t);for(var a in e.scoreFunctions){var r=e.scoreFunctions[a];t.scores[a]=r(t)}t.hasScore=!0}function l(e,t,i){e.tree.postOrderTraversal(function(e){e.hasScore||s(e.tree.scorer,e)}),e.tree.preOrderTraversalWithElementSkip(function(n){for(var a=0,r=e.behaviorFunctions[t].length;a<r;a++){if((0,e.behaviorFunctions[t][a])(n,i)===d.BREAK_TRAVERSAL)return d.BREAK_TRAVERSAL}})}var c="__DOM_SCORER_ELEMENT__",d={DO_NOTHING:"DO_NOTHING",BREAK_TRAVERSAL:"BREAK_TRAVERSAL",BREAK:"BREAK"};return i.prototype.hasId=function(e){return!!this.isElement()&&(this.node.getAttribute("id")||"").split(/\s/).indexOf(e)>=0},i.prototype.hasClass=function(e){return!!this.isElement()&&(this.node.getAttribute("class")||"").split(/\s/).indexOf(e)>=0},i.prototype.hasTagName=function(e){return!!this.isElement()&&this.node.tagName.toLowerCase()===e.toLowerCase()},i.prototype.nameMatches=function(e){if(!this.isElement())return!1;var t=this.node.getAttribute("id")||"",i=this.node.getAttribute("class")||"";return!![this.node.tagName,t,i].join(" ").match(e)},i.prototype.className=function(){return this.isElement()?this.node.getAttribute("class")||"":""},i.prototype.isElement=function(){return this.node.nodeType===Node.ELEMENT_NODE},i.prototype.forEachChild=function(e){for(var t=0,i=this.children.length;t<i&&(this.children[t].skipped||e(this.children[t],t)!==d.BREAK);t++);},i.prototype.keep=function(){n(this),this.parent&&a(this.parent,this)},i.prototype.skip=function(){n(this)},i.prototype.remove=function(){if(!this.skipped&&(n(this),this.node.parentNode&&this.node!==this.tree.root.node&&"BODY"!==this.node.nodeName))if(this.keptChildren.length){var e=this.tree.createElement("DIV");this.parent.replaceChild(e,this);for(var t=0,i=this.keptChildren.length;t<i;t++)e.appendChild(this.keptChildren[t])}else this.node.parentNode.removeChild(this.node)},i.prototype.getDepthLayer=function(){return this.tree.getDepthLayer(this.depth)},i.prototype.lastChild=function(){return this.children[this.children.length-1]},i.prototype.appendChild=function(e){if(e instanceof Node&&e.nodeType!==Node.ELEMENT_NODE)return void this.node.appendChild(e);var i=t(e),n=this.lastChild();n&&(n.next=i,i.prev=n),i.depth=this.depth+1,i.parent&&i.parent.children.length&&i.parent.children.splice(i.parent.children.indexOf(i),1),i.parent=this,this.children.push(i),this.node.appendChild(i.node)},i.prototype.replaceChild=function(e,i){var n=t(e),a=t(i);n.parent=this,n.depth=this.depth+1,n.scores=a.scores,n.skipped=a.skipped,n.keptChildren=a.keptChildren,n.children=a.children,n.prev=a.prev,n.next=a.next,a.parent=null,a.depth=0,a.prev=null,a.next=null,a.children=[];var r=this.children.indexOf(a);r>=0?this.children[r]=n:this.children.push(n),this.node.replaceChild(n.node,a.node)},r.prototype.createElement=function(e){return new i({node:document.createElement(e),tree:this})},r.prototype.createTextNode=function(e){return new i({node:document.createTextNode(e),tree:this})},r.prototype.getDepthLayer=memoize(function(e){var t=[];return this.breadthFirstTraversal(function(i){if(i.depth===e)t.push(i);else if(i.depth>e)return d.BREAK_TRAVERSAL}),t}),r.prototype.breadthFirstTraversal=function(e){var t=[];t.push(this.root);for(var i=null;(i=t.shift())&&e(i)!==d.BREAK_TRAVERSAL;)for(var n=0,a=i.children.length;n<a;n++){var r=i.children[n];t.push(r)}},r.prototype.preOrderTraversalWithElementSkip=function(e,t){t=t||this.root;for(var i=[t],n=null;n=i.shift();)if(!n.skipped&&e(n)!==d.BREAK_TRAVERSAL)for(var a=0,r=n.children.length;a<r;a++)i.push(n.children[a])},r.prototype.postOrderTraversal=function(e,t){t=t||this.root;for(var i=[],n=[t],a=null;a=n.pop();)if(!a.skipped){i.push(a);for(var r=0,o=a.children.length;r<o;r++)n.push(a.children[r])}for(var s=i.length;s--;)e(i[s])},o.toElem=t,o.Intents=d,o.elementFor=function(e){for(;e;){if(e[c])return e[c];if(e.childElementCount>1)return;e=e.firstElementChild}},o.prototype.registerScoreFunction=function(e,t){this.scoreFunctions[e]=t},o.prototype.registerMarkFunction=function(e){this.markFunctions.push(e)},o.prototype.registerBehaviorFunction=function(e,t){t||(t="before"),this.behaviorFunctions[t].push(e)},o.prototype.markAndCalcScore=function(){var e=this;this.tree.postOrderTraversal(function(t){s(e,t)})},o.prototype.rebuildTree=function(){this.tree=new r(document.body,this),this.markAndCalcScore()},o.prototype.beforeRunner=function(){l(this,"before")},o.prototype.afterRunner=function(e){this.tree.root=t(e),l(this,"after",{candidate:e})},o}(),isContentNodeHelperService=function(){var e=["SCRIPT","STYLE","NOSCRIPT","APPLET","EMBED","OBJECT","PARAM","IFRAME"];return function(t){return e.indexOf(t.nodeName)<0}}(),mergeChildrenScoreHelperService=function(){return function(e,t,i,n){for(var a=0,r=e.children.length;a<r;a++){n(i,e.children[a].scores[t])}return i}}(),sliceWordsService=function(){var e=/[^\d\^|\s|\$|\.|,|!|\?|\)|\(|"|\')]{2,}/g;return function(t){return $.trim(t).toLowerCase().match(e)||[]}}(),runDomScorerModifier=function(){var e=new DomScorerModifier;return commonScore(e),mustKeepClassifier(e),headerFooterClassifier(e),socialShareClassifier(e),relatedArticlesClassifier(e),doubleBrClassifier(e),emptyTagsClassifier(e),e.markAndCalcScore(),e},persistComputedStylesAndRect=function(){function e(e,t,i,a){for(var r=0,o=i.length;r<o;r++){var s=i[r],l=[n,a,s].join("_");e.dataset[l]=t[s]}}var t=["display","visibility"],i=["width","height"],n="pf";return function(n){var a=n.currentStyle||window.getComputedStyle(n);a&&e(n,a,t,"style");var r=n.getBoundingClientRect&&n.getBoundingClientRect();return r&&e(n,r,i,"rect"),{style:a,rect:r}}}(),coreWindow=window.parent,originalWindow=coreWindow.parent,$doc=$(document),pfData={},coreData={};window.addEventListener("message",function(e){if(e.data){var t,i=e.data.payload;switch(e.data.type){case"PfStartAlgo":$.extend(pfData,i.pfData),exTracker.init(pfData,function(){setup.start()});break;case"PfTwitterWidgetShadowDom":t=document.getElementById(i.id),t&&t.createShadowRoot&&(t.createShadowRoot(),t.shadowRoot.innerHTML=i.innerHTML,t.style.cssText=i.cssText);break;case"PfTwitterTweetRendered":t=document.querySelector("#"+i.id),t.contentDocument.head.innerHTML=i.head,t.contentDocument.body.innerHTML=i.body,t.style.cssText=i.cssText;break;case"PfContentMaskAndScrollTop":$("body").addClass("content-mask").removeClass("content-unmask"),window.scrollTo(0,0);break;case"PfContentUnMask":$("body").removeClass("content-mask").addClass("content-unmask")}}});var setup={counter:0,init:function(){if(this.counter+=1,this.counter<30&&!document.body)return setTimeout(function(){setup.init()},13*this.counter);coreWindow.postMessage({type:"PfAlgoLoaded"},"*")},start:function(){try{logger.init(pfData),logger.time("algo.js Time"),document.body.innerHTML=pfData.page.body,pfData.onServer||coreWindow.postMessage({type:"PfNSFWChecked",payload:{state:"notNeededForCS",matchedPhrase:""}},"*");var e=runDomScorerModifier();setup.detectPlatforms(),htmlPreProcessor.run(e).always(function(){setup.removeHiddenContent(),setup.removePrintNo(),setup.addAppropriateClasses(),readability.extractAuthors(),readability.extractPubDate(),primaryImage.find(),pfData.page.enablePrintOnly&&(readability.extractCopyright(),readability.extractCustomHeaderFooter()),setup.cleanHTML(e),readability.init(e)})}catch(e){helper.runPostAlgoProcesses(contentData),exTracker.log(e)}},hasDomain:function(e){return pfData.config.domains.page===e||pfData.config.ssLocation&&-1!==pfData.config.ssLocation.indexOf(e)},detectPlatforms:function(){var e,t=/wp-content/i,i=/blogger.com/i,n=/squarespace.com/i,a=/wikihow.com/i,r=/weebly.com/i,o=pfData.config.ssStyleSheetHrefs||pfData.page.csStyleSheetHrefs;if(a.test(pfData.config.domains.page)||this.hasDomain("wikihow.com"))pfData.config.platform="wikihow";else if(this.hasDomain("nytimes.com"))pfData.config.platform="nytimes";else if(this.hasDomain("washingtonpost.com"))pfData.config.platform="washingtonpost";else if(-1!==$.inArray("mediawiki",pfData.page.bodyClassList))pfData.config.platform="mediawiki";else{var s=pfData.page.metas;for(e=0;e<s.length;e++){var l=s[e];"generator"===l.name&&"blogger"===l.content?pfData.config.platform="blogger":"blogger-template"===l.name&&"dynamic"===l.content?pfData.config.platform="blogger-dynamic":"al:ios:app_name"===l.property&&"Medium"===l.content&&(pfData.config.platform="medium")}if("unknown"===pfData.config.platform)for(e=0;e<o.length;e++){var c=o[e];if(t.test(c)){pfData.config.platform="wordpress";break}if(i.test(c)){pfData.config.platform="blogger";break}if(n.test(c)){pfData.config.platform="squarespace";break}if(r.test(c)){pfData.config.platform="weebly";break}}}contentData.platform=pfData.config.platform,"undefined"!=typeof pfData.config.platform&&analytics.sendEvent("Product","Platform: "+pfData.config.platform)},cleanHTML:function(e){$("font").each(function(){var t=e.tree.createElement("span");forEachNodeChild(this,function(e){t.appendChild(e)}),DomScorerModifier.toElem(this.parentNode).replaceChild(t,this)}),$doc.find("input[type=password]").length>0&&(contentData.hasPasswordField=!0),$doc.find('.cufon img.canvas-png, .yarpp-related, #wdsb-share-box, .pf-init-iframe, .sociable, #sociable, .addthis, #addthis, #printfriendly, #pf-print, .pf-print, #print, .wp-socializer, .editsection, .a2a_dd, .addtoany_share_save, .addtoany_share_save_container, .simply-social-wrapper, #pf-mask, .social_button, #socialbookmarks, .articleFeedback, .print-no, .no-print, .ftwit, .famos-toolbar, .famos-fstar, .ftwit-drawer, .linkwithin_outer, #lws_0, #nrelate_related_0, .ccc-widget, #cccwr, .widget-cb, .doncaprio-share-buttons, .st_twitter_hcount, .st_pinterest_hcount, .st_digg_hcount, .st_stumbleupon_hcount, .st_fblike_hcount, .addthis_toolbox, #goog-gt-tt, .skiptranslate, .really_simple_share, .robots-nocontent, #sharebar, .sharebar, .articleExtras, .embed-mod, .pd-rating, .itxtrstimg, .itxthookicon, .w2bPinitButton, #twitter_h, .instaemail, #instaemail-button, .emailbutton, #share_print, .pinit-button, .ngg_images, .mr_social_sharing_wrapper, .mapp-layout, .realtidbits-comments, #newsletter-promo, .newsletter-promo, .sharify-container, .sw-pinit-button, .jetpack-likes-widget-wrapper, .crunchify-social, .post-tags, .postmeta, .hreview-aggregate, .ratingblock, .nc_socialPanel, .outbrain, .related_post, .article-comments-post-wrapper, .modal-dialog, .load-screen, div.article-info img.squared-base, .rev_slider, .social-widget, .jw-player, .xnetvidplayer, .RelatedCoverage-relatedcoverage--LmkKX, .powerinbox, .email-sign-up, .article-prev-next, .related-posts, .related-cne-video-component, #Subscribe, .ColCMostViewed, #ColCFacebook, .amzn-native-container, .ArticleTicker-container, .hidden-print, div[aria-label="cookieconsent"], nav').addClass("to-remove"),$doc.find("[class*='relatedposts']").addClass("to-remove"),$doc.find("[class*='zergnet-widget']").addClass("to-remove"),$doc.find("input").addClass("to-remove"),$doc.find("[data-spot-id]").addClass("to-remove");var t=$doc.find("[class^='addthis_']"),i=t.prev();if(i.length){var n=i.text();n.length<50&&-1!==n.toLowerCase().match(/share this|follow us/)&&i.addClass("to-remove")}if(t.addClass("to-remove"),$doc.find(".gm-style").addClass("to-remove"),$doc.find("select, textarea").addClass("to-remove"),$doc.find("form button").addClass("to-remove"),"wordpress"==pfData.config.platform&&readability.isWooCommerce()||$doc.find("label").addClass("to-remove"),pfData.page.enablePrintOnly){$doc.find(".print-only, #print-only").find(".to-remove").addBack().removeClass("to-remove")}$doc.find(".to-remove").remove(),$doc.find("abbr").removeAttr("title"),$doc.find(".pf-init-iframe, .sociable, #sociable, .addthis, #addthis, .printfriendly, .pf-print, #pf-print, .wp-socializer, .editsection, .a2a_dd, .addtoany_share_save, .addtoany_share_save_container, .simply-social-wrapper, #pf-mask, .social_button, #socialbookmarks, .articleFeedback, .print-no, .no-print, .ftwit, .famos-toolbar, .famos-fstar, .ftwit-drawer, .daftplugPublicFacebookReactionsShare, .daftplugPublicFacebookReactionsNotification").remove(),"mediawiki"===pfData.config.platform&&$doc.find(".noprint, div#jump-to-nav, .mw-jump, div.top, div#column-one, #colophon, .editsection, .toctoggle, .tochidden, div#f-poweredbyico, div#f-copyrightico, li#viewcount, li#about, li#disclaimer, li#mobileview, li#privacy, #footer-places, .mw-hidden-catlinks, tr.mw-metadata-show-hide-extended, span.mw-filepage-other-resolutions, #filetoc, .usermessage, #ca-delete, span.brokenref, .compact-ambox table .mbox-image,.compact-ambox table .mbox-imageright,.compact-ambox table .mbox-empty-cell, .compact-ambox .hide-when-compact, .check-icon a.new, .geo-nondefault,.geo-multi-punct, .nonumtoc .tocnumber, .nonumtoc .tocnumber, .toclimit-2 .toclevel-1 ul,.toclimit-3 .toclevel-2 ul,.toclimit-4 .toclevel-3 ul,.toclimit-5 .toclevel-4 ul,.toclimit-6 .toclevel-5 ul,.toclimit-7 .toclevel-6 ul, .mw-special-Watchlist #mw-watchlist-resetbutton, .wpb .wpb-header, .wpbs-inner .wpb-outside, .sysop-show,.accountcreator-show, .inputbox-hidecheckboxes form .inputbox-element, #editpage-specialchars, .wikipedia .ambox,.wikipedia .navbox,.wikipedia .vertical-navbox,.wikipedia .infobox.sisterproject,.wikipedia .dablink,.wikipedia .metadata,.editlink,a.NavToggle,span.collapseButton,span.mw-collapsible-toggle, #content cite a.external.text:after,.nourlexpansion a.external.text:after,.nourlexpansion a.external.autonumber:after, .skin-simple div#column-one,.skin-simple div#f-poweredbyico,.skin-simple div#f-copyrightico,.skin-simple .editsection, #siteNotice, div.magnify, .togglelink, .mw-editsection, .toctitle").remove();var a=$("#pf-content");if(a.length){var r=a.html();a.html(r.replace(/(<br[^>]*>[ \n\r\t]*){2,}/gi,"</p><p>"))}try{$doc.find("#pf-content a").each(function(){var e=$(this);""===$.trim(e.html().replace("&nbsp;"," ","g"))&&e.remove()}),$doc.find("#pf-content div.separator").each(function(){var e=$(this);e.children().size()==e.find("a,br").size()&&e.addClass("img-separator")}),$doc.find(".pf-caption img, .wp-caption img, .caption img, .tr-caption-container img, .thumbinner img.thumbimage").each(function(){$(this).addClass("caption-img")}),$doc.find(".embed-responsive").removeClass("embed-responsive")}catch(e){}},removePrintNo:function(){pfData.page.enablePrintOnly&&$doc.find(".print-no, .pf-remove").remove()},selectorsNotToBeRemoved:[".copyright","#copyright",".delete-no",".delete-off",".pf-author",".print-content","#print-content",".pf-date","#pf-date",".pf-title",".pf-footer",".print-header",".print-footer",".print-yes",".pf-content","#pf-content"].concat(["img[original]","img[data-lazy-src]","img[data-href]","img[data-src]","img[data-ezsrc]","img[data-layzr]","img[data-pagespeed-lazy-src]","img[data-original]","img[data-mediaviewer-src]","img[datasrc]","img[data-native-src]","img[data-original-src]","img[data-hi-res-src]","img[data-low-res-src]","img[data-raw-src]","img[data-opt-src]","img.lazyload","img.lazyloaded",'img[itemprop="url"]',"img.js-progressiveMedia-image","a[data-replace-image]","amp-img"]),removeHiddenContent:function(){pfData.page.enablePrintOnly&&this.selectorsNotToBeRemoved.push(".print-only","#print-only");var e=$doc.find(this.selectorsNotToBeRemoved.join(",")),t="";e.find(".hidden-originally").removeClass("hidden-originally"),e.removeClass("hidden-originally"),e.parents().removeClass("hidden-originally"),t+=$doc.find(readability.wpContentParentTags.join(", ")).find(readability.wpContentTags.join(".hidden-originally, ")+".hidden-originally").map(function(){return $(this).attr("class")
}).get().join(" "),t+=$doc.find(readability.wpContentParentTags.join(".hidden-originally, ")+".hidden-originally").map(function(){return $(this).attr("class")}).get().join(" "),t=t.replace(/hidden-originally/g,""),readability.wpContentParentTags=$.grep(readability.wpContentParentTags,function(e){return-1===t.indexOf(e.replace(".",""))}),readability.wpContentTags=$.grep(readability.wpContentTags,function(e){return-1===t.indexOf(e.replace(".",""))}),$doc.find(".hidden-originally").remove(),$doc.find(".hidden").removeClass("hidden")},addAppropriateClasses:function(){$("figcaption").parent("figure").addClass("pf-caption")}},logElIdClass=function(e){try{var t=e.id?"#"+e.id:"",i=e.className?"."+e.className:"";return e.tagName.toLowerCase()+t+i}catch(e){return""}},logEl=function(e){var t=e.readability?e.readability.contentScore.toFixed(2):"undefined";return logElIdClass(e)+" :: Score - "+t},contentData={hasContent:!1,title:"",description:"",author:"",dir:"ltr",customHeader:"",pubDate:"",customFooter:"",copyright:"",platform:"unknown",content:"",contentTextWithTitleAndUrl:"",contentTextLength:0,hasPasswordField:!1,nsfwState:"unknown",nsfwMatchedPhrase:null},config={negativeKeyWords:["archive","bookmark","share","login","aside","combx","comment","contact","foot","footer","footnote","form","masthead","meta","outbrain","related","scroll","shoutbox","sidebar","sponsor","shopping","tags","menu","authorp","breadcrumb","replies","reply"],positiveKeyWords:["article","body","content","entry","hentry","main","page","pagination","post","blog","story","ERSIngredientsHeader","ERSHeading","ERSSectionHead","ingredient","ingredients","dataTable","wsite-content","recipe-list","ico-ingridients","recipe-info","rcps-table-ingredients","product","footnote","recipe","wpurp-recipe-ingredients","learn-press-content-item"]},COOKING_WORDS_REGEXP=/ingredient|ingredients|recipe|salt|egg|eggs|honey|cream|organic|tablespoon|baking|chopped|cup|sugar|flour|rice|oil|salt|garlic|chili|egg|tsp|mozzarella|parmesan|garlic|tbsp|spoon|cocoa|butter|milk|waniliowy|cytrynowego|jajka|OUNCE|BONELESS|Preheat|oven|ONIONS|pizzico|Mascarpone|Formaggio|Parmigiano|Riso|Sale|pepe|Formaggio|Barbabietole|provola|Parmigiano|grattuggiato|Latte|affumicato|Scalogno|Cannella|Limone|Olio|noce/i,readability={version:"1.7.1",flags:7,hasContent:!0,titleText:null,titleTags:["h1","h2","h3"],wpContentParentTags:[".hentry",".single-post","article"],wpContentTags:[".post-content .fusion-fullwidth",".entry-content",".entry_content",".entry",".format_text",".entrytext",".post-body",".post-content",".post-entry",".post_body",".post_content",".post_entry"],wpPostImageSelectors:[".hentry .wp-post-image","header img.featured-image",".entry-thumb img",".hentry .featured-thumbnail.large img",".pinit-overlay img",".post-content .post-img img"],run:0,debugLevel:1,textLimit:250,positiveTags:["article"],negativeTags:["aside","nav","footer"],FLAG_STRIP_UNLIKELYS:1,FLAG_WEIGHT_CLASSES:2,FLAG_CLEAN_CONDITIONALLY:4,parsedPages:{},unlikelyTags:["FOOTER"],regexps:{unlikelyCandidates:/combx|disqus|rss|shoutbox|ad-break|agegate/i,unlikelyCandidatesNavigation:/menu|sidebar|pagination|related-posts/i,primaryImageUnlikelyParents:/secondary|boxzilla/i,okMaybeItsACandidate:/content|and|article|body|column|main|extra|shadow|rightmen|header|content-sidebar-wrap|content-with-sidebar-wrp|pk_left_sidebar|artpag|has-sidebar|node-blog-entry|with-sidebar|widget-content|sp_sidebar|nd-no-sidebars|onecol-sidebar|page/i,negativePartialWord:new RegExp(config.negativeKeyWords.join("|"),"i"),negativeWholeWord:new RegExp("\\b"+config.negativeKeyWords.join("\\b|\\b"),"i"),positivePartialWord:new RegExp(config.positiveKeyWords.join("|"),"i"),positiveWholeWord:new RegExp("\\b"+config.positiveKeyWords.join("\\b|\\b"),"i"),extraneous:/print|archive|comment|discuss|e[\-]?mail|share|reply|all|login|sign|single/i,divToPElements:/<(a|blockquote|dl|div|img|ol|p|pre|table|ul)/i,replaceBrs:/(<br[^>]*>[ \n\r\t]*){2,}/gi,replaceFonts:/<(\/?)font[^>]*>/gi,normalize:/\s{2,}/g,videos:/http:\/\/(www\.)?(youtube|vimeo)\.com/i,period:/\.( |$)/,captions:/caption|figure/i,weight:/[\s\d]+(gram|gm|ml|kg|cup|pound|lb|spoon|tbsp)[s]?\s+/i,fractions:/[0-9]+\/[0-9]+/i,cookingWords:COOKING_WORDS_REGEXP,cookingWordsGlobal:new RegExp(COOKING_WORDS_REGEXP.toString(),"ig"),wpPostImage:/wp-post-image/i},wrapTextNodes:function(e,t){if(!e.tagName||-1===$.inArray(e.tagName.toUpperCase(),["PRE","CODE","SVG"]))if(e.nodeType===Node.TEXT_NODE){if($.trim(e.textContent)){var i=t.tree.createElement("span");i.node.className="text-node",DomScorerModifier.toElem(e.parentNode).replaceChild(i,e),i.appendChild(e)}}else e.childNodes.length>0&&forEachNodeChild(e,function(e){readability.wrapTextNodes(e,t)})},extractAuthors:function(){var e,t,i,n=[],a=[],r=/(^|\W)(by)(\W|$)/i,o=[".pf-author",".hentry a[rel=author]","a[rel=author]",".author.vcard .fn","[itemprop~=author] [itemprop~=name]","[itemprop~=author]",".byline","#author","header a[rel=author]",".hentry .post-author"],s=o.join(", ");if($.each(o,function(o,l){if(n=[],a=[],t=$doc.find(l).not(".widget *").not(".sidebar *"),t.size()>=1&&-1===t[0].className.search(/combx|comment|community|disqus|extra|foot|header|menu|remark|rss|shoutbox|sidebar|sponsor|ad-break|agegate|pagination|pager|popup|tweet|twitter|tags|postmetadata/i)&&-1===$.inArray(this.nodeName,["INPUT"])){e=t.first();var c=e.parent(),d=c.parent(),p=null;if(c.find(s).length>1?p=c:d.find(s).length>1&&(p=d),p&&(e=p),e.addClass("algo-author"),e.find("sup").remove(),p?(p.find(l).each(function(){helper.extractText(n,this)}),n.join(" ").match(/,/)||(n=[n.join(", ")])):helper.extractText(n,e[0]),-1===e.text().search(r))try{i=e.parent(),a.push(i),0===i.prev().children().size()&&a.push(i.prev()),$.each(a,function(e,t){var i=t.text();if(-1!==i.search(r)&&i.length<60)return n.unshift("By"),!1})}catch(e){}return contentData.author=n.join(" "),readability.author='<span id="pf-author">'+n.join(" ")+"</span>",!1}}),!readability.author){var l=$.grep(pfData.page.metas,function(e){return"author"===e.property});1===l.length&&l[0].content&&(contentData.author=l[0].content,readability.author='<span id="pf-author">'+l[0].content+"</span>")}},extractPubDate:function(){this.extractDateBySelectors([".pf-date","#pf-date",".Blog-meta-item--date"]),this.extractDateBySelectors([".hentry .entry-date",'.hentry .post-date time[itemprop="datePublished"]','.article-content--main time[itemprop="datePublished"]']),this.extractDateFromMeta("property","article:published"),this.extractDateFromMeta("property","article:published_time"),this.extractDateFromMeta("name","shareaholic:article_published_time"),this.extractDateFromMeta("itemprop","datePublished")},extractDateFromMeta:function(e,t){if("undefined"==typeof readability.pubDate){var i,n=helper.findMeta(pfData.page.metas,e,t),a=helper.findMeta(pfData.page.metas,"property","og:locale");if(1==a.length&&"undefined"!=typeof a[0].content&&(i=a[0].content.replace("_","-")),1==n.length&&"undefined"!=typeof n[0].content)try{var r=n[0].content.split("T")[0],o=new Date(r);if(!isNaN(o.getTime()))try{readability.pubDate=o.toLocaleDateString(i,{month:"long",year:"numeric",day:"numeric",timeZone:"UTC"})}catch(e){readability.pubDate=o.toLocaleDateString("en-US",{month:"long",year:"numeric",day:"numeric",timeZone:"UTC"})}}catch(e){}}},extractDateBySelectors:function(e){"undefined"==typeof readability.pubDate&&$.each(e,function(e,t){var i=$doc.find(t).not(".widget *").not(".sidebar *");if(1==i.size())return readability.pubDate=i.text(),i.remove(),!1})},extractCopyright:function(){var e=$doc.find(".copyright, #copyright");e.size()>0&&(readability.copyright=e.clone().removeAttr("style"),e.remove())},extractCustomHeaderFooter:function(){var e=$doc.find(".print-header");1==e.size()&&(readability.customHeader=$("<div />",document).append(e.clone().removeAttr("style")).html(),e.remove());var t=$doc.find(".pf-footer, .print-footer");t.size()>0&&(readability.customFooter=$("<div />",document).append(t.clone().removeAttr("style")).html(),t.remove())},init:function(e){readability.prepDocument(e);var t=e.tree.createElement("DIV"),i=e.tree.createElement("DIV");helper.pickTitleFromContent();var n=readability.getArticleTitle(e),a=document.body.innerHTML;e.beforeRunner();var r=readability.grabArticle(e);r||(document.body.innerHTML=a,e.rebuildTree(),readability.textLimit=250,readability.run=0,r=readability.grabArticle(e),r?exTracker.log(new Error("runDomScorerModifier removes main content")):(r=e.tree.createElement("DIV").node,r.id="pf-content",readability.hasContent=!1)),readability.articleTitle=n.node,readability.articleContent=r,e.afterRunner(r),readability.titleText?readability.articleTitle.innerHTML=readability.titleText:readability.titleText=$.trim($(readability.articleTitle).text()),$(r).find(readability.titleTags.join(",")).each(function(){readability.titleText==$.trim($(this).text())&&$(this).remove()}),t.node.id="printfriendly",i.node.id="pf-print-area",n.node.id="pf-title",pfData.onServer||(i.appendChild(n),i.appendChild(r),t.appendChild(i),document.body.innerHTML="",DomScorerModifier.toElem(document.body).appendChild(t),document.body.removeAttribute("style")),primaryImage.prependTo(r),readability.hasContent&&readability.wrapTextNodes(r,e),contentData.hasContent=readability.hasContent,contentData.title=readability.getInnerText(n.node),descriptions=$.grep(pfData.page.metas,function(e){return"description"===e.name}),descriptions.length&&(contentData.description=descriptions[0].content),contentData.dir=readability.getSuggestedDirection(r.textContent),contentData.content=r.innerHTML;var o=pfData.config.ssLocation||"";contentData.contentTextWithTitleAndUrl=o+r.textContent+contentData.title,contentData.contentTextLength=r.textContent.length,contentData.lang=pfData.page.language,logger.timeEnd("algo.js Time"),helper.runPostAlgoProcesses(contentData)},getSuggestedDirection:function(e){function t(){return e.replace(/@\w+/,"")}function i(t){var i=e.match(new RegExp(t,"g"));return null!==i?i.length:0}function n(){return 100*(i("[\\u05B0-\\u05F4\\uFB1D-\\uFBF4]")+i("[\\u060C-\\u06FE\\uFB50-\\uFEFC]"))/e.length>20}return e=t(e),n()?"rtl":"ltr"},getArticleTitle:function(e){var t,i,n,a,r,o,s=null;if(t=["h1","h2","h3"],a=$doc.find(".pf-title"),1==a.size()&&(logger.log("Picking title using .pf-title"),s=a),s||(a=$doc.find('header [itemprop~="headline"]'),1==a.size()&&""!==$.trim(a.text())&&(logger.log("Picking title using header itemprop~=headline"),s=a)),s||"blogger"!==pfData.config.platform&&"wordpress"!==pfData.config.platform||(i=[".post-title",".entry-title"],"wordpress"===pfData.config.platform&&i.push(".post_title",".posttitle","#page-title","#title",".title"),n=[],$.each([".single-post",".post","#post",".hentry"],function(e,a){0===$doc.find(".pf-body-cache"+a).size()&&$.each(t,function(e,t){$.each(i,function(e,i){n.push(a+" "+i+" "+t),n.push(a+" "+t+i)})})}),$.each(n,function(e,t){if(a=$doc.find(t),1===a.size()&&""!==$.trim(a.text()))return logger.log("Picking title using WP/blogger classes"),s=a,!1})),s||"squarespace"!==pfData.config.platform||(i=["article .BlogItem-title"],$.each(i,function(e,t){if(a=$doc.find(t),1===a.size()&&""!==$.trim(a.text()))return logger.log("Picking title using squarespace classes"),s=a,!1})),!s&&""!==$.trim($("title",document).text())){var l=$.trim($("title",document).text()).toLowerCase().replace(/\W+/g,""),c=0;$.each(t,function(e,t){$doc.find(t).each(function(e,t){var i=l.match($(t).text().toLowerCase().replace(/\W+/g,""));i&&i[0].length>15&&i[0].length>c&&(logger.log("Using title element which had a substring of document title"),c=i[0].length,s=$(t))})})}if(s||(r=$doc.find("article header"),r.size()>0&&$.each(t,function(e,t){return a=r.find(t),!(a.size()>1)&&(1==a.size()?(logger.log("Picking title using article header, header h-tags"),s=a,!1):void 0)})),s)return readability.titleText=$.trim(s.text()),readability.titleTags.push(s[0].nodeName),o=e.tree.createElement("H1");var d="",p="";try{d=p=document.title,"string"!=typeof d&&(d=p=readability.getInnerText(document.getElementsByTagName("title")[0]))}catch(e){}if(d.match(/ [\|\-] /))d=p.replace(/(.*)[\|\-] .*/gi,"$1"),d.split(" ").length<3&&(d=p.replace(/[^\|\-]*[\|\-](.*)/gi,"$1"));else if(-1!==d.indexOf(": "))d=p.replace(/.*:(.*)/gi,"$1"),d.split(" ").length<3&&(d=p.replace(/[^:]*[:](.*)/gi,"$1"));else if(d.length>150||d.length<15){var g=document.getElementsByTagName("h1");1===g.length&&(d=readability.getInnerText(g[0]))}return d=$.trim(d),d.split(" ").length<=4&&(d=p),o=e.tree.createElement("H1"),o.node.innerText=d,o},prepDocument:function(e){if(null===document.body){var t=e.tree.createElement("body");try{document.body=t}catch(e){document.documentElement.appendChild(t.node),logger.log(e)}}document.body.id="pf-body"},prepArticle:function(e){readability.cleanStyles(e),readability.clean(e,"object")},initializeNode:function(e){switch(e.readability={contentScore:0},e.tagName){case"ARTICLE":e.readability.contentScore+=15;break;case"ASIDE":case"NAV":e.readability.contentScore-=15;break;case"DIV":e.readability.contentScore+=5;break;case"PRE":case"TD":case"BLOCKQUOTE":e.readability.contentScore+=3;break;case"ADDRESS":case"OL":case"UL":case"DL":case"DD":case"DT":case"LI":case"FORM":e.readability.contentScore-=3;break;case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"TH":e.readability.contentScore-=5}e.readability.contentScore+=readability.getClassWeight(e)},getTextScore:function(e){var t=0;return t+=e.split(",").length,t+=Math.min(Math.floor(e.length/100),3),e&&(t+=(e.match(readability.regexps.cookingWordsGlobal)||[]).length/e.length*50),t},isUnlikelyCandidate:function(e,t){if(readability.unlikelyTags.indexOf(e.tagName)>=0)return!0;var i=e.className+" "+e.id+" "+e.nodeName;return"image"===t?readability.regexps.unlikelyCandidates.test(i)||readability.regexps.primaryImageUnlikelyParents.test(i):(readability.regexps.unlikelyCandidates.test(i)||readability.regexps.unlikelyCandidatesNavigation.test(i)&&e.querySelector("a"))&&!readability.regexps.okMaybeItsACandidate.test(i)&&!e.querySelector(readability.positiveTags.join(","))&&"BODY"!==e.tagName&&-1===$.inArray(e.tagName.toLowerCase(),readability.positiveTags)},hasUnlikelyParent:function(e){return $(e).parents().is(function(){return readability.isUnlikelyCandidate(this,"image")})},skipSchemaSelectorsDomain:function(){for(var e=["reuters.com"],t=pfData.config,i=0,n=e.length;i<n;i++){var a=e[i];if(t.domains.page.indexOf(a)>=0||t.ssLocation&&t.ssLocation.indexOf(a)>=0)return!0}return!1},isWooCommerce:function(){var e="|"+pfData.page.bodyClassList.join("|")+"|",t=/\|[^|]*?woocommerce.*?\|/i.test(e),i=/\|home\|/i.test(e),n=/\|single-product\|/i.test(e);return t&&(n||!i)},grabArticle:function(e,t){readability.run+=1;var i,n,a,r,o,s,l="added-to-list"+readability.run,c=[];pfData.page.enablePrintOnly&&c.push(".print-only","#print-only");var d=".printfriendly.pf-alignright, .printfriendly.pf-alignleft, .printfriendly.pf-aligncenter",p=$doc.find(".pf-content, #pf-content");if(p.find(d).remove(),(""!==$.trim(p.text())||p.find("img").size()>0||-1!==$.inArray("IMG",$.map(p,function(e){return e.nodeName})))&&c.push(".pf-content","#pf-content"),n=pfData.page.enablePrintOnly?$doc.find(c.join(",")):$(),0===n.size()){switch(pfData.config.platform){case"blogger-dynamic":i=$doc.find(".overview-content .entry-content, .viewitem-content .entry-content"),i.size()>0&&(i.find(".post-title, .entry-title, .post-header, .post-footer").remove(),n=i);break;case"blogger":i=$doc.find("#main").find(".post-body, .entry-content, .post-title, .entry-title"),i.size()>0&&(i.find(".post-title, .entry-title, .post-header, .post-footer").remove(),n=i);break;case"wordpress":if($doc.find("header").find(readability.wpContentTags.join(",")).addClass("pf-invalid-selector"),this.isWooCommerce())n=$doc.find('[data-elementor-type="wp-post"], .woocommerce-cart-form, .cart-collaterals, .wc-product-table, .summary, #tab-description, .woocommerce-product-gallery__image,.woocommerce-product-gallery__image.flex-active-slide .zoomImg, .woocommerce-tabs .woocommerce-Tabs-panel,[data-widget_type*="woocommerce-product"]');else{var g=[];$.each(readability.wpContentParentTags,function(e,t){$.each(readability.wpContentTags,function(e,i){g.push(t+" "+i)})}),g.push('[data-elementor-type="wp-post"]'),$.each(g,function(e,t){var i=$doc.find(t);if(1===i.size()&&!i.hasClass("pf-invalid-selector")&&readability.getInnerText(i[0]).length>150)return logger.log("Found WP candidate. Selector - "+t),n=i,!1})}break;case"weebly":i=$doc.find("#wsite-content .blog-content"),1===i.size()&&(i.text().length>20||i.find("img").size()>0)&&(n=i);break;case"wikihow":i=$doc.find("#bodycontents"),1===i.size()&&(i.text().length>20||i.find("img").size()>0)&&(n=i);break;case"medium":i=$doc.find("article.postArticle--full > .postArticle-content"),1===i.size()&&(i.text().length>20||i.find("img").size()>0)&&(n=i);break;case"washingtonpost":n=$doc.find(".article-body .teaser-content, .remainder-content");break;case"nytimes":if(i=$doc.find(".story-body"),i.size()>=1&&(n=i),0===n.size()){var m=$.grep(pfData.page.metas,function(e){return"slug"===e.name});m.length&&(i=$doc.find("#"+m[0].content),i.size()>=1&&(n=i))}0===n.size()&&(i=$doc.find("article#story"),i.size()>=1&&(i.find('nav, header, footer, #bottom-wrapper, #newsletter-module, .bottom-of-article, [class^="ResponsiveAd"], div [class^="SectionBar"], div[class^="elementStyles-recirculation"], [class^="InlineMessage"]').remove(),n=i));break;case"squarespace":var u='#productSummary, .product-description, #content, .Main-content, .BlogItem, .hentry, main, article div[data-layout-label="Post Body"]'.split(",");$.each(u,function(e,t){if(i=$doc.find(t),(1===i.size()||2===i.size())&&(i.text().length>20||i.find("img").size()>0))return i.find(".product-quantity-input, .sqs-add-to-cart-button-wrapper, .product-variants, .product-sharing, aside, .entry-header, .entry-footer, nav, .Blog-meta, .BlogItem-share, .Index-page-scroll-indicator").remove(),n=i,!1})}if(!this.skipSchemaSelectorsDomain()){var f=['[itemtype*="schema.org/Article"] [itemprop~=articleBody]','[itemtype*="schema.org/NewsArticle"] [itemprop~=articleBody]','[itemtype*="schema.org/Report"] [itemprop~=articleBody]','[itemtype*="schema.org/ScholarlyArticle"] [itemprop~=articleBody]','[itemtype*="schema.org/TechArticle"] [itemprop~=articleBody]','[itemtype*="schema.org/Recipe"]','[itemtype*="schema.org/ScholarlyArticle"] [data-article-body]'];$.each(f,function(e,t){var i=$doc.find(t);if(1===i.size()&&readability.getInnerText(i[0]).length>250)return n=i,!1})}}if(n.size()>0&&(n.find(".navbar, .flex-direction-nav, .yarpp-related, .articleInline, .bottom-meta, .bottomnavigation, #branding, .commentlist, #commentwrapper, #comments, .comments, #disqus_thread, .entry-meta, .igit_relpost, #navbar, .nocomments, .noprint, .pd-rating, .pin-it-btn-wrapper, .post-actions, .post-comments, .post-extras, .post-footer, .post_footer, .post-header, .post-info, .post .meta, .post-meta, .postmeta, .postmetadata, .post_nav, .post_tags, .prev_next, .print-no, .respond, #respond, #sharebar, .shareTools, .share-buttons, .shareTop, .share_this, #sharebarx, .share_box, .sharedaddy, .share_icons, .shr-bookmarks, .sociable, .social_button, .social-ring, .socialwrap, .wpadvert, .wp-socializer, .editorial-disclosure").remove(),n.find(d).remove(),"wikihow"===pfData.config.platform?n.find("#method_toc, .altadder_section, .relatedwikihows, .ad_label, .wh_ad, .wh_ad_inner, .video, .step_num").remove():"nytimes"===pfData.config.platform&&n.find("footer, .visually-hidden").remove(),""!==$.trim(n.text())||n.find("img").size()>0||-1!==$.inArray("IMG",$.map(n,function(e){return e.nodeName})))){logger.log("Bypassed readability and found content using "+pfData.config.platform+" rules");var h=e.tree.createElement("DIV");if(h.node.id="pf-content","wordpress"===pfData.config.platform){$.each(readability.wpPostImageSelectors,function(e,t){var i=$doc.find(t);if(1===i.size()){var a=i.first();if(!primaryImage.findSameImage(primaryImage.getImageOrigSrc(a[0],n)))return"FIGURE"===a.parent()[0].nodeName&&(a=a.parent()),h.appendChild(a[0]),logger.log("Picked WP Post Image using selector - "+t),!1}});var y=$doc.find(".single-recipe-ingredients");1===y.size()&&0===n.find(".single-recipe-ingredients").size()&&h.appendChild(y[0])}n.find("*[style]").andSelf().each(function(){this.setAttribute("orig-style",this.getAttribute("style")),this.removeAttribute("style")});var v=n.text().length;n.find("aside").text().length<.15*v&&n.find("aside").remove();for(var b=0,C=n.length;b<C;b++){var T=n[b];0===$(h.node).has(T).length&&h.appendChild(T)}return h.node}var w=readability.flagIsActive(readability.FLAG_STRIP_UNLIKELYS),S=null!==t;t=t||document.body;var E=t.innerHTML,x=[];if(t.children&&t.children.length)for(var D=0,I=t.children.length;D<I;D++)x.push(t.children[D]);for(var N,A=null,k=[],L=["P","PRE","TD","UL","OL"],P=["SPAN","B"];A=x.shift();)if(a=null,w&&readability.isUnlikelyCandidate(A))logger.log("Removing unlikely candidate - "+logElIdClass(A)),A.parentNode.removeChild(A);else{if($.inArray(A.tagName,L)>-1&&!commonUtils.hasClass(A,"pf-br-replacement"))k.push(A);else if($.inArray(A.tagName,P)>-1&&1===A.childNodes.length&&A.childNodes[0].nodeType===Node.TEXT_NODE&&readability.getInnerText(A).length>30){do{a=helper.findNonExclusiveParent(a||A)}while(!a||$.inArray(a.tagName,P)>-1);commonUtils.hasClass(a,l)||k.push(a)}else if("DIV"===A.tagName)if(-1===A.innerHTML.search(readability.regexps.divToPElements))try{var _=e.tree.createElement("p");forEachNodeChild(A,function(e){_.appendChild(e)}),DomScorerModifier.toElem(A.parentNode).replaceChild(_,A),_.node.id=A.id,_.node.className=A.className,k.push(_.node)}catch(e){k.push(A),logger.log("Could not alter div to p, probably an IE restriction, reverting back to div.: "+e)}else forEachNodeChild(A,function(t){try{if(t.nodeType===Node.TEXT_NODE&&$.trim(t.nodeValue)){var i=e.tree.createElement("span");pfData.browser.isIE&&pfData.browser.version<10&&(t.innerHTML="&nbsp;"+t.nodeValue),DomScorerModifier.toElem(A).replaceChild(i,t),i.appendChild(t)}else t.nodeType===Node.COMMENT_NODE&&A.removeChild(t)}catch(e){}});if(k[k.length-1]&&commonUtils.addClassTo(k[k.length-1],l),A.children&&A.children.length)for(var R=0,M=A.children.length;R<M;R++)x.push(A.children[R])}n=[];for(var O=0;O<k.length;O++){s=!1;var F=k[O];$.inArray(F.tagName,["SECTION","DIV","ARTICLE"])>-1&&F.children&&F.children.length>1?(a=F,s=!0):a=helper.findNonExclusiveParent(F),a&&"undefined"!=typeof a.tagName&&(r=readability.getInnerText(F),r.length<25&&!helper.isRecipeIngredient(r)&&!helper.isLinkTextOnly(F,r)||r.length<5||(o=helper.findNonExclusiveParent(a),N=readability.getTextScore(r),!s&&commonUtils.hasClass(a,l)||("undefined"==typeof a.readability&&(readability.initializeNode(a),n.push(a)),a.readability.contentScore+=N),!o||"undefined"==typeof o.tagName||commonUtils.hasClass(a,l)||commonUtils.hasClass(o,l)||("undefined"==typeof o.readability&&(readability.initializeNode(o),n.push(o)),o.readability.contentScore+=.9*N),readability.debugLevel>3&&(logger.log("Node: "+logElIdClass(F)),logger.log("Text Score: "+N),logger.log("Parent: "+logEl(a)),o&&"undefined"!=typeof o.readability&&logger.log("grandParent: "+logEl(o)),logger.log(""))))}for(var z=null,B=0,W=n.length;B<W;B++)n[B].readability.contentScore=n[B].readability.contentScore*(1-readability.getLinkDensity(n[B]));n.sort(function(e,t){var i=e.readability.contentScore,n=t.readability.contentScore;return i<n?1:i===n?0:-1}),logger.log("Top 5 Candidates");for(var b=0,H=Math.min(5,n.length);b<H;b++)logger.log(logEl(n[b]));if(n.length>0){z=n[0];var U=Math.min(z.readability.contentScore,100),j=[],G=.9*U;if($.each(n,function(e,t){if($candidate=$(t),$candidate.parents(".pf-candidate").size()>0)return!0;$candidate.find(".pf-candidate").size()>0&&("ARTICLE"===t.tagName||t.readability.contentScore>=G)&&(z=t,j[0]=t),$candidate.addClass("pf-candidate"),j.push(t)}),j.length>1)try{if(z=helper.getCommonAncestor(j),"BODY"===z.tagName){var q=function(e){return"TBODY"===e.tagName?e.parentElement:e},K=e.tree.createElement("div"),V=q(n[0]);DomScorerModifier.toElem(V.parentElement).replaceChild(K,V),K.appendChild(V),K.node.readability=V.readability;for(var b=0,C=j.length;b<C;b++)K.appendChild(q(j[b]));z=K.node,logger.log("Combining top candidates")}else logger.log("Changing Top Candidate to Ancestor")}catch(e){z=n[0]}}if(null===z||"BODY"===z.tagName){logger.log("Top Candidate NULL or BODY");for(var Y=e.tree.createElement("DIV"),X=t.firstChild;X;)Y.appendChild(X),X=t.firstChild;DomScorerModifier.toElem(t).appendChild(Y),z=Y.node}if("medium"===pfData.config.platform){var J=$(z).parents("article");if(1===J.length){logger.log("Changing Top Candidate to Ancestor article");for(var Q=J.find("section").filter(function(){return!!this.innerText.length}),Z=["h1","h2","h3","h4","p","pre","code","ul","ol","figure","img"],ee=[],b=0,H=Z.length;b<H;b++){var te=Z[b];ee.push([te,te+">*",":has("+te+")"].join(","))}$(Q[0]).find(":not("+ee.join(",")+")").remove(),z=J[0]}}"TBODY"===z.nodeName&&(z=z.parentNode),"undefined"==typeof z.readability&&readability.initializeNode(z),logger.log("Top Candidate: "+logEl(z));var ie=e.tree.createElement("DIV");S&&(ie.node.id="pf-content");var ne=Math.max(10,.2*z.readability.contentScore),ae=z.parentNode?Array.prototype.slice.call(z.parentNode.childNodes):[],re=null;1===$(z).prev().find("img").length&&(re=$(z).prev()[0],ie.appendChild(re)),1===$(z).parent().prev().find("img").length&&ie.appendChild($(z).parent().prev()[0]);for(var oe=0,se=ae.length;oe<se;oe++){var le=ae[oe],ce=!1,de=["p","div","ul","ol","table","tr","td","tbody","blockquote"],pe=0,ge="",me=le.id+" "+le.className;if(le&&le!==re){if(readability.debugLevel>3&&logger.log("Looking at sibling node: "+logEl(le)),le.className===z.className&&""!==z.className&&(pe+=.2*z.readability.contentScore),le===z)ce=!0,ge="top candidate";else{if(readability.regexps.negativeWholeWord.test(me))continue;if("undefined"!=typeof le.readability&&le.readability.contentScore+pe>=ne)ce=!0,ge="content score + contentbonus > threshold";else if($.inArray(le.nodeName.toLowerCase(),de)>-1){var ue=readability.getLinkDensity(le),fe=readability.getInnerText(le),he=fe.length,ye=le.getElementsByTagName("a").length,ve=le.getElementsByTagName("img").length;he>300&&ue<.25?(ce=!0,ge="Long content with low link density"):he>80&&ue<.25&&ye<3?(ce=!0,ge="Possibly long content with low link density & link count < 3"):he<80&&0===ue&&-1!==fe.search(readability.regexps.period)?(ce=!0,ge="Short content with no links and has periods (.)"):ye<2&&1==ve&&(ce=!0,ge="link count < 2 with one image")}}if(ce){logger.log("Appending node: "+logEl(le)+" -- because "+ge);var be=null;"DIV"!==le.nodeName&&"P"!==le.nodeName&&"TABLE"!==le.nodeName?(be=e.tree.createElement("DIV"),be.node.id=le.id,forEachNodeChild(le,function(e){be.appendChild(e)})):be=DomScorerModifier.toElem(le),be.node.className="",ie.appendChild(be)}}}return readability.prepArticle(ie.node),readability.getInnerText(ie.node).length<readability.textLimit?(logger.log("****Text length less than "+readability.textLimit+" ****"),t.innerHTML=E,e.rebuildTree(),e.beforeRunner(),readability.flagIsActive(readability.FLAG_STRIP_UNLIKELYS)?(readability.removeFlag(readability.FLAG_STRIP_UNLIKELYS),logger.log("Turning off FLAG_STRIP_UNLIKELYS"),readability.grabArticle(e,t)):readability.flagIsActive(readability.FLAG_WEIGHT_CLASSES)?(readability.removeFlag(readability.FLAG_WEIGHT_CLASSES),logger.log("Turning off FLAG_WEIGHT_CLASSES"),readability.grabArticle(e,t)):readability.flagIsActive(readability.FLAG_CLEAN_CONDITIONALLY)?(readability.removeFlag(readability.FLAG_CLEAN_CONDITIONALLY),logger.log("Turning off FLAG_CLEAN_CONDITIONALLY"),readability.grabArticle(e,t)):250===readability.textLimit?(logger.log("*** Reducing text limit to 75 ***"),readability.textLimit=75,readability.addFlag(readability.FLAG_STRIP_UNLIKELYS),readability.addFlag(readability.FLAG_WEIGHT_CLASSES),readability.addFlag(readability.FLAG_CLEAN_CONDITIONALLY),readability.grabArticle(e,t)):null):ie.node},getInnerText:function(e,t){if("undefined"==typeof e.textContent)return"";t=void 0===t||t;var i=$.trim(e.textContent);return t&&(i=i.replace(readability.regexps.normalize," ")),i},getCharCount:function(e,t){return t=t||",",readability.getInnerText(e).split(t).length-1},cleanStyles:function(e){e=e||document;var t=e.firstChild;if(e)for("function"==typeof e.removeAttribute&&"pf-styled"!==e.className&&(e.setAttribute("orig-style",e.getAttribute("style")),e.removeAttribute("style"));null!==t;)t.nodeType===Node.ELEMENT_NODE&&("pf-styled"!==t.className&&(t.setAttribute("orig-style",t.getAttribute("style")),t.removeAttribute("style")),readability.cleanStyles(t)),t=t.nextSibling},getLinkDensity:function(e){for(var t=e.getElementsByTagName("a"),i=readability.getInnerText(e).length,n=0,a=0,r=t.length;a<r;a+=1)n+=readability.getInnerText(t[a]).length;return n/i},getClassWeight:function(e){if(!readability.flagIsActive(readability.FLAG_WEIGHT_CLASSES))return 0;var t=0,i=e.id+" "+e.className;return-1!==i.search(readability.regexps.negativePartialWord)&&-1===$.inArray(e.nodeName.toLowerCase(),readability.positiveTags)&&(t-=25),-1!==i.search(readability.regexps.positivePartialWord)&&-1===$.inArray(e.nodeName.toLowerCase(),readability.negativeTags)&&(t+=25),t},nodeIsVisible:function(e){return(0!==e.offsetWidth||0!==e.offsetHeight)&&"none"!==e.style.display.toLowerCase()},clean:function(e,t){for(var i=e.getElementsByTagName(t),n="object"===t||"embed"===t,a=i.length-1;a>=0;a-=1){if(n){for(var r="",o=0,s=i[a].attributes.length;o<s;o+=1)r+=i[a].attributes[o].value+"|";if(-1!==r.search(readability.regexps.videos))continue;if(-1!==i[a].innerHTML.search(readability.regexps.videos))continue}i[a].parentNode.removeChild(i[a])}},htmlspecialchars:function(e){return"string"==typeof e&&(e=e.replace(/&/g,"&amp;"),e=e.replace(/"/g,"&quot;"),e=e.replace(/'/g,"&#039;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;")),e},flagIsActive:function(e){return(readability.flags&e)>0},addFlag:function(e){readability.flags=readability.flags|e},removeFlag:function(e){readability.flags=readability.flags&~e}},primaryImage={primaryImageHTML:null,find:function(){try{var e=this.wpPostImage()||this.metaImage()||this.largeImage();e&&!e.src&&(e=e.querySelector("img")),e&&e.src&&(this.primaryImageHTML=e.outerHTML)}catch(e){exTracker.log(e)}},largeImage:function(){for(var e=document.querySelectorAll(".pf-large-image"),t=0;t<e.length;t++){var i=e[t];if(!readability.isUnlikelyCandidate(i,"image")&&!readability.hasUnlikelyParent(i))return i}},wpPostImage:function(){var e;if("wordpress"===pfData.config.platform&&$.each(readability.wpPostImageSelectors,function(t,i){var n=$(document).find(i);if(1===n.size())return e=n.first(),"FIGURE"===e.parent()[0].nodeName&&(e=e.parent()),logger.log("Picked WP Post Image using selector - "+i),!1}),e)return e[0]},metaImage:function(){var e=this.metaContentAttr("property","og:image")||this.metaContentAttr("name","twitter:image")||this.metaContentAttr("itemprop","image");return e?this.findSameImage(e,document.body):null},metaContentAttr:function(e,t){var i=$.grep(pfData.page.metas,function(i){return i[e]===t});return i.length?i[0].content:null},prependTo:function(e){if(pfData.page.hasPrintOnly&&pfData.page.enablePrintOnly)return void logger.log("Primary Image: SKIPPED, has print-only");if(!this.primaryImageHTML)return void logger.log("Primary Image: SKIPPED, no candidates");var t=$(this.primaryImageHTML),i=this.getImageOrigSrc(t[0]);this.findSameImage(i,e)?logger.log("Primary Image: ALREADY EXISTS src = "+i):(t.addClass("blockImage").addClass("pf-primary-img"),$(e).prepend(t),logger.log("Primary Image: ADDED src = "+i))},findSameImage:function(e,t){e=this.cleanSrc(e),e=decodeURI(e);var i=null;return $("img, picture source",t).each(function(){var t=primaryImage.getImageOrigSrc(this);if(!t)return!0;t=primaryImage.cleanSrc(t),t=decodeURI(t);var n=primaryImage.getImageOrigSrcSet(this);return n=decodeURI(n),t===e||-1!==n.indexOf(e)||-1!==e.indexOf(t)||-1!==t.indexOf(e)?(i=this,!1):void 0}),i},getImageOrigSrc:function(e){return pfData.onServer?e.getAttribute("pf-orig-src")||e.src:e.src},getImageRestoreSrc:function(e){return pfData.onServer?e.getAttribute("pf-restore-src"):e.src},getImageOrigSrcSet:function(e){return pfData.onServer?e.getAttribute("pf-orig-srcset"):e.srcset},cleanSrc:function(e){return e=e.replace(/format=\d+w/g,""),e=e.replace(/www\./g,""),e=e.replace(/[-_]\d{1,4}x\d{1,4}/,"")}},imageProcessor={init:function(){$doc.find("#pf-content img").addClass("flex-width"),
$doc.find(".wp-caption img, .caption img, .tr-caption-container img, .thumbinner img.thumbimage").addClass("caption-img").removeClass("flex-width"),this.resizeImageCssClass=commonUtils.resizeImageCssClass(pfData.userSettings.imagesSize),this.fixLazyLoadImages(),this.fixResponsiveImages(),this.fixMediumImages(),this.convertImagesToBase64(),this.layoutImages.setDisplayStyle(),this.layoutImages.init()},convertImagesToBase64:function(){$("img").each(function(){var e=this;e.src&&toBase64URL(e.src,function(t){e.src=t})})},fixResponsiveImages:function(){$doc.find("img[srcset]").each(function(){var e=this;toBase64URL(e.currentSrc||e.src,function(t){e.src=t}),this.removeAttribute("srcset")})},fixMediumImages:function(){$doc.find("img.ix.iy").remove(),$doc.find("img").each(function(){var e=this;if(e.src&&/miro\.medium\.com/i.test(e.src)){var t=e.src.split("/"),i=t[t.length-1];$doc.find('img[src*="'+i+'"]').filter(function(){return this!==e}).remove(),e.src=e.src.replace(/q=\d+/,"q=100").replace(/max\/\d+\//,"max/1200/")}})},interpolationUrlRegexp:/([\?&][^=]*={[^\}]*})/,imgUrlRegexp:/(http(s?):)|([\/|.|\w|\s])*\.(?:jpg|gif|png|img)/i,lazyImgDataAttributes:["original","data-lazy-src","data-href","data-src","data-ezsrc","data-layzr","data-pagespeed-lazy-src","data-original","data-mediaviewer-src","datasrc","data-native-src","data-original-src","data-hi-res-src","data-low-res-src","data-raw-src","data-opt-src"],normalizeDataSrcAttr:function(e){if(e){var t=this.tryGetSrcFromJson(e);return t||e}},findDeepValue:function(e,t){for(var i in e){var n=e[i];if("string"==typeof n&&t(n))return n;if("object"==typeof n)return this.findDeepValue(n,t)}},tryGetSrcFromJson:function(e){var t={};try{t=JSON.parse(e)}catch(e){return}return this.findDeepValue(t,function(e){return imageProcessor.isValidImgSrc(e)})},isValidImgSrc:function(e){return this.imgUrlRegexp.test(e)},extractFirstImageFromSrcset:function(e){try{return e.split(",")[0].trim().split(" ")[0]}catch(e){return""}},fixLazyLoadImages:function(){$doc.find("picture source[data-srcset]").each(function(){this.getAttribute("srcset")||this.setAttribute("srcset",this.getAttribute("data-srcset"))}),$doc.find('img[original],img[data-lazy-src],img[data-href],img[data-src],img[data-ezsrc],img[data-layzr],img[data-pagespeed-lazy-src],img[data-original],img[data-mediaviewer-src],img[datasrc],img[data-native-src],img[data-original-src],img[data-hi-res-src],img[data-low-res-src],img[data-raw-src],img[data-opt-src],img.lazyload,img.lazyloaded,img[itemprop="url"],img.js-progressiveMedia-image,a[data-replace-image],amp-img').each(function(){for(var e=this,t=$(document.createElement("img")),i=null,n=0;n<imageProcessor.lazyImgDataAttributes.length;n++){var a=imageProcessor.normalizeDataSrcAttr(this.getAttribute(imageProcessor.lazyImgDataAttributes[n]));if(a&&a.indexOf(";base64,")<0){i=a;break}}if(!(i=i||this.getAttribute("href"))&&pfData.page.location.host.match(/yahoo/)){var r=this.getAttribute("orig-style");i=r&&r.match(/(http.*?)\)/)?r.match(/(http.*?)\)/)[1]:this.getAttribute("src")}i||(i=e.getAttribute("src")),pfData.config.isExtension&&i&&0===i.indexOf("//")&&(i=pfData.page.location.protocol+i);var o=e.getAttribute("data-srcset")||e.getAttribute("srcset");i||(i=imageProcessor.extractFirstImageFromSrcset(o)),t[0].className=e.className,copyDataset(t[0],e);var s=parseInt(e.getAttribute("width"),10),l=parseInt(e.getAttribute("height"),10);s>1&&(t[0].width=s),l>1&&(t[0].height=l),e.parentNode.replaceChild(t[0],e),t.on({load:function(){imageProcessor.layoutImages.layoutImage(t),t[0].src=t[0].src,toBase64URL(t[0].src,function(e){t[0].src=e}),t.off("load")},error:function(){var e=t.attr("src").replace(imageProcessor.interpolationUrlRegexp,"");e!==t.attr("src")&&t.attr("src",e)}}),i?t[0].src=i:o&&(t[0].srcset=o)})},layoutImages:{thresholds:{blockImage:{width:369},smallImage:{width:100,height:60}},layoutImage:function(e){if("none"===e[0].getAttribute("data-pf_style_display"))return!0;var t=this;window.setTimeout(function(){t.setImgClass(e)},250)},setImgClass:function(e){var t,i=commonUtils.getImageWidth(e,pfData.onServer),n=commonUtils.getImageHeight(e,pfData.onServer);if(0!==i&&(e.removeClass("blockImage mediumImage smallImage"),t=e.hasClass("pf-primary-img")||i>this.thresholds.blockImage.width?"blockImage":i<this.thresholds.smallImage.width&&n<this.thresholds.smallImage.height?"smallImage":"mediumImage",e.addClass(t),e.hasClass("caption-img"))){var a=e.parents(".pf-caption, .wp-caption, .caption, .tr-caption-container");e[0].offsetWidth&&1===a.find("img").length&&a.width(e[0].offsetWidth),a.addClass("pf-caption flex-width").addClass(t).addClass(imageProcessor.resizeImageCssClass),e.hasClass("thumbimage")&&e.parents(".thumbinner").width(e[0].offsetWidth).addClass("pf-caption flex-width").addClass(t).addClass(imageProcessor.resizeImageCssClass)}},setDisplayStyle:function(){var e="right",t=["left","right","block","none"],i={margin:"1em 0 1em 1.5em",clear:"right",display:"inline-block","float":"right"};-1!==$.inArray(pfData.userSettings.imageDisplayStyle,t)&&(e=pfData.userSettings.imageDisplayStyle),"block"===e?i={margin:"1em auto",clear:"both",display:"block","float":"none"}:"none"===e?(i.margin="0",i["float"]="none"):"left"===e&&(i.margin="1em 1.5em 1em 0",i["float"]="left");var n="#pf-content img.mediumImage, #pf-content figure.mediumImage {";for(var a in i)n+=a+": "+i[a]+";";n+="}",commonUtils.addCSS(n,document,!0)},init:function(){$doc.find("#pf-content img").each(function(){var e=$(this);e.hasClass("pf-svg-image")||this.removeAttribute("height"),0===commonUtils.getImageWidth(e,pfData.onServer)?(e.load(function(){imageProcessor.layoutImages.layoutImage(e)}),window.setTimeout(function(){imageProcessor.layoutImages.layoutImage(e)},2e3)):imageProcessor.layoutImages.layoutImage(e)})}}},helper={findNotEmptyParent:function(e){var t=e.parent();if(0!==t.length)return t.children().length>1||0!==$.trim(t.text()).length?{parent:t,tag:e}:this.findNotEmptyParent(t)},runPostAlgoProcesses:function(e){try{pfData.onServer&&nsfwChecker.checkText(e.contentTextWithTitleAndUrl),e.hasContent&&(this.addHeaderFooter(),pfData.onServer||imageProcessor.init()),coreWindow.postMessage({type:"PfRunPostAlgoProcesses",payload:{contentData:e}},"*")}catch(t){exTracker.log(t),coreWindow.postMessage({type:"PfRunPostAlgoProcesses",payload:{contentData:e}},"*")}},pickTitleFromContent:function(){var e=["h1","h2","h3"];$.each(e,function(e,t){var i=$doc.find(t);return 1==i.size()&&""!==$.trim(i.text())?(readability.titleText=$.trim(i.text()),readability.titleTags.push(t),logger.log("Picking possible title from content - "+readability.titleText),!1):!(i.size()>1)&&void 0})},isLinkTextOnly:function(e,t){var i=e.querySelectorAll("a");return 1===i.length&&i[0].innerText===t},isRecipeIngredient:function(e){var t=-1!==e.search(readability.regexps.weight),i=-1!==e.search(readability.regexps.fractions),n=-1!==e.search(readability.regexps.cookingWords);return t||i||n},addHeaderFooter:function(){var e=[];""!==$.trim(pfData.userSettings.headerImageUrl)&&e.push('<img id="pf-header-img" src="'+$.trim(pfData.userSettings.headerImageUrl)+'"/>'),""!==$.trim(pfData.userSettings.headerTagline)&&e.push('<p id="pf-tagline">'+unescape($.trim(pfData.userSettings.headerTagline))+"</p>"),pfData.config.disableUI||e.push(this.headerHtml());var t=$(".algo-author",readability.articleContent);readability.author&&0===t.length?e.push(readability.author):contentData.author="",readability.pubDate&&(e.push("<span id='pf-date'>"+readability.pubDate+"</span>"),contentData.pubDate=readability.pubDate),$(e.join("")).insertBefore($doc.find("#pf-content")),$doc.find("#pf-title").insertBefore($doc.find("#pf-src")),readability.customHeader&&($(readability.customHeader,document).insertBefore($doc.find("#pf-title")),contentData.customHeader=$(readability.customHeader).html()),readability.customFooter&&($doc.find("body").append(readability.customFooter),contentData.customFooter=$(readability.customFooter).html()),readability.copyright&&($doc.find("body").append(readability.copyright),contentData.copyright=readability.copyright.html())},headerHtml:function(){var e=pfData.config.urls.page;try{e=decodeURI(e)}catch(e){}var t=encodeURI(e),i=pfData.page.location,n=decodeURI(i.host).replace(/^www\./,""),a=decodeURI(i.pathname).replace(/\/$/,"");return'<div id="pf-src"><a id="pf-src-url" href="'+t+'"><img id="pf-src-icon" src="'+pfData.page.favicon+'" ><strong>'+n+"</strong><span>"+a+"</span></a></div>"},extractText:function(e,t){if(t.nodeType===Node.TEXT_NODE){var i=$.trim(t.nodeValue);""!==i&&e.push(i)}else if(length>1||1===t.childNodes.length&&t.childNodes[0].nodeType!=Node.TEXT_NODE)forEachNodeChild(t,function(t){helper.extractText(e,t)});else{var n=$.trim($(t).text());n.length&&e.push(n)}},findMeta:function(e,t,i){return $.grep(e,function(e){return e[t]===i})},isExclusiveBlockElement:function(e){return e.children&&1===e.children.length&&["block","flex"].indexOf(e.getAttribute("data-pf_style_display"))>=0},hasParentAndGrandParent:function(e,t){return e&&t&&"undefined"!==t.tagName&&"BODY"!==t.tagName&&"BODY"!==e.tagName&&"HTML"!==t.tagName},findNonExclusiveParent:function(e){for(var t=e.parentNode,i=t?t.parentNode:null;this.hasParentAndGrandParent(t,i)&&this.isExclusiveBlockElement(t);)t=i,i=i.parentNode;if("BODY"!==t.tagName&&"HTML"!==t.tagName)return t},getCommonAncestor:function(e){if(e.length<2)throw new Error("getCommonAncestor: not enough parameters");var t,i=e.shift(),n="contains"in i?"contains":"compareDocumentPosition",a="contains"===n?1:16;e:for(;i=i.parentNode;){for(t=e.length;t--;)if((i[n](e[t])&a)!==a)continue e;return i}return null}},htmlPreProcessor={run:function(e){var t;if("medium"===pfData.config.platform&&($(".js-progressiveMedia-canvas, .js-progressiveMedia-thumbnail").remove(),$(".js-progressiveMedia-image").removeClass("hidden-originally")),$("script,link,style,noscript,object,embed,.comment-list",document.body).remove(),this.replaceEmbeddedYoutube(e),$("iframe").not(".twitter-tweet-rendered").filter(function(){return!$(this).parent(".twitter-tweet-rendered").length}).remove(),$("iframe.twitter-tweet-rendered, .twitter-tweet-rendered iframe").each(function(){var e=$(this);this.width=e.data("pf_rect_width"),this.height=e.data("pf_rect_height")}),this.fixSvgUseTags(),pfData.onServer)t=$.Deferred().resolve();else try{this.fixCanvases();var i=this.fixInlineSvgs(),n=this.fixSvgImages();t=$.when(i,n)}catch(e){logger.error(e),t=$.Deferred().reject()}return t.promise()},fixCanvases:function(){for(var e=document.getElementsByTagName("canvas"),t=pfData.page.canvasDataUrls,i=e.length-1;i>=0;i--){var n=e[i];this.convertCanvasToImage(n,t[n.getAttribute("pf-dataurl-index")])}},replaceEmbeddedYoutube:function(e){var t="https://www.youtube.com/embed/";$("iframe[src^='"+t+"']").each(function(){var i={id:null,type:null,href:null,thumb:null},n=this.src.match(new RegExp(t+"([^?]+)"));if(n){var a=n[1];i.type="video",i.href="https://youtu.be/"+a,i.thumb="https://img.youtube.com/vi/"+a+"/hqdefault.jpg"}else{var r=this.src.match(new RegExp(t+".*list=([^;&]+)"));if(r){var a=r[1];i.type="playlist",i.href="https://www.youtube.com/playlist?list="+a,i.thumb="https://img.youtube.com/vi/"+a+"/hqdefault.jpg"}}if(i.type){var o=e.tree.createElement("a");o.node.href=i.href,o.node.setAttribute("data-pf-allow-empty","1"),commonUtils.addClassTo(o.node,"youtube-replace-link");var s=e.tree.createElement("img");s.node.src=i.thumb,s.node.setAttribute("pf-restore-src",i.thumb),commonUtils.addClassTo(s.node,"youtube-replace-img");var l=e.tree.createElement("span");l.appendChild(e.tree.createTextNode(i.href)),DomScorerModifier.toElem(this.parentElement).replaceChild(o,this),o.appendChild(s),o.appendChild(l)}})},fixInlineSvgs:function(){var e=$("svg").map(function(){return htmlPreProcessor.convertSvgToPng(this)});return $.when.apply($,e)},fixSvgImages:function(){var e=/\.svg(\?.+)?$/i,t=$("img").filter(function(){return e.test(this.getAttribute("src"))}).map(function(){var e=$.Deferred();return this.onload=function(){if("pending"===e.state())try{var t=htmlPreProcessor.convertToPng(this);this.parentNode&&this.parentNode.replaceChild(t,this),e.resolve()}catch(t){logger.error(t),e.reject()}},this.onerror=function(){this.parentNode&&this.parentNode.removeChild(this),e.reject()},window.setTimeout(function(){e.resolve()},2e3),e.promise()});return $.when.apply($,t)},convertToPng:function(e){var t=commonUtils.getImageWidth(e,pfData.onServer)||e.width,i=commonUtils.getImageHeight(e,pfData.onServer)||e.height,n=document.createElement("canvas");n.width=t,n.height=i,n.getContext("2d").drawImage(e,0,0,t,i);var a=n.toDataURL("image/png"),r=new Image(t,i);r.src=a;var o=e.getAttribute("class");return o&&r.setAttribute("class",o),r},convertSvgToPng:function(e){var t=$.Deferred(),i=commonUtils.getImageWidth(e,pfData.onServer),n=commonUtils.getImageHeight(e,pfData.onServer);if(0===i||0===n)return e.parentNode.removeChild(e),t.resolve();this.fixSvgAttrs(e,i,n);var a=htmlPreProcessor.scaleImageDimensions({width:i,height:n}),r=new Image(a.width,a.height);r.onload=function(){if("pending"===t.state())try{var i=htmlPreProcessor.convertToPng(this),n=(e.getAttribute("class")||"")+" pf-svg-image";i.setAttribute("class",n),e.parentNode&&e.parentNode.replaceChild(i,e),t.resolve()}catch(e){logger.error(e),t.reject()}},r.onerror=function(){t.reject()},window.setTimeout(function(){t.resolve()},2e3);var o=(new XMLSerializer).serializeToString(e);return r.src="data:image/svg+xml,"+encodeURIComponent(o),t.promise()},fixSvgUseTags:function(){$("svg").each(function(){var e=$(this);e.find("use").each(function(){var t=$(this),i=t.attr("xlink:href");if(!i||"#"!==i[0])return e.remove(),!1;var n=[];try{n=$(t.attr("xlink:href"))}catch(e){}if(!n.length)return e.remove(),!1;t.replaceWith(n.children().clone())})})},fixSvgAttrs:function(e,t,i){e.getAttribute("version")||e.setAttribute("version",1.1),e.getAttribute("xmlns")||e.setAttribute("xmlns","http://www.w3.org/2000/svg");try{e.setAttribute("width",t),e.setAttribute("height",i)}catch(e){}},convertCanvasToImage:function(e,t){var i,n;i=e.getAttribute("class"),i=i||"",i+=" canvas-png",n=new Image,n.src=t,n.setAttribute("class",i),e.parentNode.replaceChild(n,e)},scaleImageDimensions:function(e){if(e.width=parseInt(e.width,10),e.height=parseInt(e.height,10),e.width>pfData.config.maxImageWidth){var t=pfData.config.maxImageWidth/e.width;e.width=e.width*t,e.height=e.height*t}return e}};analytics.setCoreWindow(coreWindow);var nsfwChecker={matchedPhrase:"",state:$.Deferred(),checkText:function(e){this.state.then(function(e){contentData.nsfwState=e,contentData.nsfwMatchedPhrase=nsfwChecker.matchedPhrase,coreWindow.postMessage({type:"PfNSFWChecked",payload:{state:e,matchedPhrase:nsfwChecker.matchedPhrase}},"*")});var t=pfData.page.language||"en";t=t.split("-")[0];var i=["hi","sv","es","da","tr","tlh","fi","hu","th","zh","pt","it","no","eo","de","cs","en","nl","ja","ko","pl","ru","fr","vn"];-1!=$.inArray(t,i)?$.getJSON("/assets/client/nsfw/nsfw-db254fdc34a8d00f3b7ab8052cf71a376bb3cb573a59d33678f4b69978d3937e.json",function(i){nsfwChecker.checkContentForPhrases(e,i,t)}).error(function(){nsfwChecker.state.resolve("unknown")}):this.state.resolve("unknown")},checkContentForPhrases:function(e,t,i){logger.time("Check for NSFW");var n="(?:^|\\s|$|\\.|,|!|\\?|\\)|\\(|\"|')";t[i]||(i="en");var a=t.common.concat(t[i]),r=new RegExp(n+"("+a.join("|")+")"+n,"i"),o=e.match(r);o?(nsfwChecker.matchedPhrase=o[0],logger.log("NSFW detected: "+nsfwChecker.matchedPhrase),this.state.resolve("present")):this.state.resolve("absent"),logger.timeEnd("Check for NSFW")}};